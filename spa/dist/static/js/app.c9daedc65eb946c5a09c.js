webpackJsonp([1],{"H+ap":function(e,t){e.exports={activities:[{name:"park"},{name:"garden"},{name:"pub"},{name:"food"},{name:"shopping center"},{name:"cinema"},{name:"movie theatre"},{name:"bouldering"},{name:"snowboarding"},{name:"climbing"},{name:"monument"}]}},"H/op":function(e,t){},IxXz:function(e,t){e.exports={keys:{GOOGLEMAPS:"AIzaSyCS0KrhCnNOyW__KqWeeN-ZCC0ZuQNd3m4",FIREBASE:"AIzaSyD5iTbGZz3murpqAeONbujZXiz2Wkek8hE",YELP:"Ofpipn5mCCKKjnxKryn-AKZgv6HTrs1dMI-oomDEvGqvOubCN35uPZ5MDCowjkmpqq97mGLfdABNVvFOQi2COBNDLcPPJT0oCpDi93wpkOk-hwg6lAqAEpCQnD7WWnYx"}}},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),s=n("1mcD"),i=n.n(s),r=n("lMsw"),o=n.n(r),c=n("IxXz");o.a.KEY=c.keys.GOOGLEMAPS,o.a.LIBRARIES=["places","geometry"];var l={name:"App",data:function(){return{googleMaps:o.a}}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"o-app",attrs:{id:"app"}},[t("router-view",{attrs:{google:this.googleMaps}})],1)},staticRenderFns:[]},p=n("VU/8")(l,u,!1,null,null,null).exports,m=n("/ocq"),d=n("BO1k"),v=n.n(d),g=n("bOdI"),f=n.n(g),h=n("//Fk"),_=n.n(h),w=n("Xxa5"),y=n.n(w),b=n("exGp"),k=n.n(b),C=n("Sazm"),M=n.n(C),x={calcPrimeLocation:function(e){if(!(e.length>0))return!1;for(var t=e.length,n=0,a=0,s=0,i=0;i<e.length;i++){var r=e[i][0]*Math.PI/180,o=e[i][1]*Math.PI/180;n+=Math.cos(r)*Math.cos(o),a+=Math.cos(r)*Math.sin(o),s+=Math.sin(r)}n/=t,a/=t,s/=t;o=Math.atan2(a,n);var c=Math.sqrt(n*n+a*a),l=180*(r=Math.atan2(s,c))/Math.PI,u=180*o/Math.PI;return new Array(l,u)},pinSymbol:function(e){return{path:"M 0,0 C -2,-20 -10,-22 -10,-30 A 10,10 0 1,1 10,-30 C 10,-22 2,-20 0,0 z",fillColor:e,fillOpacity:1,scale:1}}},P={name:"Map",props:["emitMap","markers","infoWindow"],data:function(){return{position:{lat:0,lng:0},map:null,currentPlace:null,errors:[]}},mounted:function(){this.initMap(),this.getLocation()},methods:{initMap:function(){var e=this;e.map=new google.maps.Map(this.$refs.map,{zoom:17,center:this.position,mapTypeControl:!1});var t=new google.maps.places.PlacesService(e.map);google.maps.event.addListener(e.map,"click",function(n){n.placeId&&(n.stop(),t.getDetails({placeId:n.placeId},function(t,n){var a=new google.maps.Marker({position:{lat:t.geometry.location.lat(),lng:t.geometry.location.lng()},map:e.map,title:t.name,visible:!1});e.infoWindow.el.open(e.map,a),"OK"===n&&(e.infoWindow.content={name:t.name,phone:t.formatted_phone_number,place:t,url:t.url,image_url:void 0!==t.photos?t.photos[0].getUrl({maxWidth:100,maxHeight:100}):""})}))}),this.yourPin=new google.maps.Marker({icon:x.pinSymbol("green")})},getLocation:function(){var e=this;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(t){var n=t.coords,a=new google.maps.LatLng(n.latitude,n.longitude);e.map.panTo(a),e.pinYouAreHere(n.latitude,n.longitude)},function(e){console.warn("ERROR("+e.code+"): "+e.message)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}},pinYouAreHere:function(e,t){var n=this;return k()(y.a.mark(function a(){var s;return y.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:s=new google.maps.Marker({position:{lat:e,lng:t},icon:x.pinSymbol("green"),animation:google.maps.Animation.DROP}),n.markers.push(s),s.setMap(n.map);case 3:case"end":return a.stop()}},a,n)}))()},whereToGo:function(){var e=this.markers.map(function(e){return[e.position.lat(),e.position.lng()]}),t=x.calcPrimeLocation(e);if(t){var n=new google.maps.LatLng(t[0],t[1]);this.yourPin.setPosition({lat:t[0],lng:t[1]}),this.yourPin.setMap(this.map),this.map.panTo(n)}else this.yourPin.setMap(null)}},watch:{map:function(){this.$emit("emitMap",this.map)}}},I={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"c-map"},[t("div",{staticClass:"c-map__btns"},[t("button",{staticClass:"c-map__location-btn",on:{click:this.getLocation}},[t("svg",{staticClass:"c-map__location-btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"38",height:"37",viewBox:"0 0 44 34"}},[t("defs",[t("filter",{attrs:{id:"a",width:"128%",height:"128%",x:"-14%",filterUnits:"objectBoundingBox"}},[t("feOffset",{attrs:{dy:"2",in:"SourceAlpha",result:"shadowOffsetOuter1"}}),t("feGaussianBlur",{attrs:{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"2"}}),t("feColorMatrix",{attrs:{in:"shadowBlurOuter1",result:"shadowMatrixOuter1",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"}}),t("feMerge",[t("feMergeNode",{attrs:{in:"shadowMatrixOuter1"}}),t("feMergeNode",{attrs:{in:"SourceGraphic"}})],1)],1)]),t("path",{attrs:{fill:"#EFEFEF","fill-rule":"evenodd",d:"M6.67 25.25l30.45-13.58-15.23 30.35-2.61-13.71z",filter:"url(#a)",transform:"translate(-3 -10)"}})])])]),this._v(" "),t("div",{ref:"map",staticClass:"c-map__canvas"})])},staticRenderFns:[]},A=n("VU/8")(P,I,!1,null,null,null).exports,L={name:"LocationSearch",props:["map"],data:function(){return{invalidPlace:!1}},mounted:function(){this.initLocationSearch()},methods:{initLocationSearch:function(){var e=this,t=this.$refs.loc,n=new google.maps.places.Autocomplete(t);n.addListener("place_changed",function(){var t=n.getPlace();if(t.geometry){e.invalidPlace=!1;var a=new google.maps.LatLng(t.geometry.location.lat(),t.geometry.location.lng());e.map.panTo(a)}else e.invalidPlace=!0})}}},O={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("span",{directives:[{name:"show",rawName:"v-show",value:this.invalidPlace,expression:"invalidPlace"}]},[this._v("Click to search")]),this._v(" "),t("input",{ref:"loc",staticClass:"c-text-input",attrs:{placeholder:"Search Location"}})])},staticRenderFns:[]},S=n("VU/8")(L,O,!1,null,null,null).exports,W=n("Gu7T"),E=n.n(W),R=(n("YtIj"),n("IxXz")),B=M.a.initializeApp({apiKey:R.keys.FIREBASE,authDomain:"do-more-ecc5c.firebaseapp.com",databaseURL:"https://do-more-ecc5c.firebaseio.com/",projectId:"do-more-ecc5c",storageBucket:"do-more-ecc5c.appspot.com",messagingSenderId:"669577878898"}).database(),U=n("mtWM"),N=n.n(U),T=n("RUzx"),$=n.n(T),D=n("H+ap"),F=n.n(D),G={name:"ActivitySelect",props:["getActivities"],components:{Multiselect:$.a},data:function(){return{value:null,options:F.a.activities}},watch:{value:function(e){var t=e.map(function(e){return e.name});this.$emit("getActivities",t)}}},z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",{staticClass:"c-label"},[e._v("Activities")]),e._v(" "),n("multiselect",{staticClass:"c-multiselect-custom",attrs:{options:e.options,multiple:!0,"close-on-select":!0,"clear-on-select":!0,"hide-selected":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"name","preselect-first":!1,limit:3,showLabels:!0},scopedSlots:e._u([{key:"tag",fn:function(t){return n("div",{staticClass:"c-multiselect-custom__tag"},[n("span",{staticClass:"c-multiselect-custom__tag-name"},[e._v("\n        "+e._s(t.option.name)+"\n      ")]),e._v(" "),n("span",{staticClass:"c-multiselect-custom__tag-remove",on:{click:function(e){t.remove(t.option)}}},[e._v("\n        âœ•\n      ")])])}}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},staticRenderFns:[]};var H=n("VU/8")(G,z,!1,function(e){n("yOnu")},null,null).exports,V={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-accordion"},[n("button",{staticClass:"c-accordion__btn",class:{"is-active":e.isOpen},on:{click:function(t){t.preventDefault(),e.isOpen=!e.isOpen}}},[e._v("\n    "+e._s(e.label)+"\n  ")]),e._v(" "),n("transition",{attrs:{name:"slide"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"c-accordion__drawer",class:{"is-active":e.isOpen}},[e._t("default")],2)])],1)},staticRenderFns:[]},Y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-my-gems"},[n("ul",{staticClass:"c-my-gems__list"},e._l(e.places,function(t,a){return n("li",{key:a,staticClass:"c-my-gem",on:{mouseover:function(n){e.highlight(t,t.id)}}},[n("div",{staticClass:"c-my-gem__cont"},[n("div",{staticClass:"c-my-gem__img",style:{"background-image":"url("+t.image_url+")"}}),e._v(" "),n("div",{staticClass:"c-my-gem__details"},[n("div",{staticClass:"c-my-gem__name"},[e._v(e._s(t.name))]),e._v("\n          Shared by:\n          "),e._l(t.users,function(a,s){return t.users?n("div",{key:s},[e._v("\n            "+e._s(a.displayName)+"\n          ")]):e._e()})],2),e._v(" "),n("ul",{staticClass:"c-my-gem__btns"},[n("li",{staticClass:"c-my-gem__btn"},[n("a",{staticClass:"c-btn c-btn--naked",attrs:{href:t.url,target:"_blank"}},[e._v("\n              Link\n            ")])]),e._v(" "),n("li",{staticClass:"c-my-gem__btn"},[n("button",{staticClass:"c-btn c-btn--naked",attrs:{disabled:!e.user},on:{click:function(n){n.preventDefault(),e.addToItinerary(t)}}},[e._v("\n              Claim\n            ")])])])])])})),e._v(" "),e.page>=1&&!e.loading?n("button",{staticClass:"c-btn",on:{click:function(t){return t.preventDefault(),e.loadMore(t)}}},[e._v("\n    Load More\n  ")]):e._e(),e._v(" "),e.page>=1&&e.loading?n("div",{staticClass:"spinner"}):e._e()])},staticRenderFns:[]},q={name:"FindPlaces",props:["infoWindow","radius","map","addToItinerary","user"],data:function(){var e;return e={page:0,places:[],markers:[],selected:[],searching:!1},f()(e,"places",null),f()(e,"sortBy","best_match"),e},methods:{getPlaces:function(){var e=this;return k()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.searching=!0,0===e.page&&(e.places=[]),t.next=4,e.buildList();case 4:return t.next=6,e.placeYelpMarkers(e.places);case 6:return t.next=8,e.getUsers();case 8:e.places.length>=25&&(e.page+=1),e.searching=!1;case 10:case"end":return t.stop()}},t,e)}))()},search:function(){var e=this;return k()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.page=0,t.next=3,e.getPlaces();case 3:case"end":return t.stop()}},t,e)}))()},buildList:function(){var e=this;return k()(y.a.mark(function t(){var n,a,s,i,r;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null,!(e.selected.length>0)){t.next=13;break}n=0;case 3:if(!(n<e.selected.length)){t.next=11;break}return t.next=6,e.getYelpPlaces(e.selected[n],e.radius,e.sortBy);case 6:s=t.sent,(a=e.places).push.apply(a,E()(s));case 8:n++,t.next=3;break;case 11:t.next=17;break;case 13:return t.next=15,e.getYelpPlaces(null,e.radius,e.sortBy);case 15:r=t.sent,(i=e.places).push.apply(i,E()(r));case 17:case"end":return t.stop()}},t,e)}))()},getYelpPlaces:function(e,t,n){var a=this;return k()(y.a.mark(function s(){var i,r,o,c;return y.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,a.map.center.lat();case 2:return i=s.sent,s.next=5,a.map.center.lng();case 5:return r=s.sent,s.prev=6,s.next=9,N.a.get("/api",{params:{lat:i,lng:r,offset:25*a.page,term:e,radius:t,sortBy:n}});case 9:return o=s.sent,c=o.data,s.abrupt("return",c);case 14:s.prev=14,s.t0=s.catch(6),console.log(s.t0);case 17:case"end":return s.stop()}},s,a,[[6,14]])}))()},getUsers:function(){var e=this;this.places.forEach(function(t){B.ref("gems").orderByChild("place/id").equalTo(t.id).on("value",function(n){if(n.val())for(var a in n.val()){var s=n.val()[a];e.$set(t,"users",s.users)}})})},placeYelpMarkers:function(e){var t=this;return k()(y.a.mark(function n(){var a,s,i;return y.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(t.markers=[],t.$emit("clearMarkers"),a=t,s=function(t){a.markers[t]=new google.maps.Marker({position:{lat:e[t].coordinates.latitude,lng:e[t].coordinates.longitude},icon:x.pinSymbol("#D65745")}),a.markers[t].place=e[t],google.maps.event.addListener(a.markers[t],"click",function(){console.log(e[t]),a.infoWindow.el.open(a.map,this),a.infoWindow.content=e[t]}),a.markers[t].setMap(a.map)},i=0;i<e.length;i++)s(i);case 5:case"end":return n.stop()}},n,t)}))()},getActivities:function(e){this.selected=e}},watch:{selected:function(){this.page=0},markers:function(){this.$emit("emitMarkers",this.markers)}},components:{Accordion:n("VU/8")({name:"Accordion",props:["label"],data:function(){return{isOpen:!1}},methods:{}},V,!1,null,null,null).exports,ActivitySelect:H,Places:n("VU/8")({name:"Places",props:["places","addToItinerary","user","page","loading","markers","map","infoWindow"],data:function(){return{}},methods:{highlight:function(e,t){var n=this;this.markers.forEach(function(a){a.place.id===t&&(n.infoWindow.el.open(n.map,a),n.infoWindow.content=e)})},loadMore:function(){this.$emit("getPlaces")}},watch:{}},Y,!1,null,null,null).exports}},K={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Accordion",{attrs:{label:"Filter"}},[n("ActivitySelect",{on:{getActivities:e.getActivities}}),e._v(" "),n("div",[n("label",{staticClass:"c-label"},[e._v("Order")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.sortBy,expression:"sortBy"}],staticClass:"c-select",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.sortBy=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"distance"}},[e._v("Distance")]),e._v(" "),n("option",{attrs:{value:"best_match"}},[e._v("Best Match")]),e._v(" "),n("option",{attrs:{value:"rating"}},[e._v("Rating")]),e._v(" "),n("option",{attrs:{value:"review_count"}},[e._v("Review Count")])])])],1),e._v(" "),n("div",{staticClass:"u-txt-center"},[e.searching?n("div",{staticClass:"spinner"}):n("button",{staticClass:"c-btn",attrs:{disabled:e.searching},on:{click:function(t){return t.preventDefault(),e.search(t)}}},[e._v("\n      Search\n    ")])]),e._v(" "),e.places?n("Places",{attrs:{places:e.places,addToItinerary:e.addToItinerary,user:e.user,page:e.page,loading:e.searching,markers:e.markers,map:e.map,infoWindow:e.infoWindow},on:{getPlaces:e.getPlaces}}):e._e()],1)},staticRenderFns:[]},X=n("VU/8")(q,K,!1,null,null,null).exports,j={name:"MyGems",props:["user"],data:function(){return{loading:!1,gems:[],deleting:null}},mounted:function(){var e=this;return k()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getGems();case 2:case"end":return t.stop()}},t,e)}))()},methods:{getGems:function(){var e=this;return k()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.loading=!0,e.$bindAsArray("gems",B.ref("gems").orderByChild("users/"+e.user.uid),null,function(){return e.loading=!1});case 2:case"end":return t.stop()}},t,e)}))()},deleteGem:function(e){var t=e[".key"];B.ref().child("gems").child(t).remove().then(function(){console.log("Remove succeeded.")}).catch(function(e){console.log("Remove failed: ",e.message)})}}},Z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-my-gems"},[e.loading?n("div",{staticClass:"spinner"}):n("ul",{staticClass:"c-my-gems__list"},e._l(e.gems,function(t,a){return n("li",{key:a,staticClass:"c-my-gem"},[n("div",{staticClass:"c-my-gem__cont"},[n("div",{staticClass:"c-my-gem__img",style:{"background-image":"url("+t.place.image_url+")"}}),e._v(" "),n("div",{staticClass:"c-my-gem__details"},[n("div",{staticClass:"c-my-gem__name"},[e._v(e._s(t.place.name))]),e._v(" "),n("div",{staticClass:"c-my-gem__loc"},[e._v(e._s(t.place.city)+", "+e._s(t.place.country))])]),e._v(" "),n("ul",{staticClass:"c-my-gem__btns"},[n("li",{staticClass:"c-my-gem__btn"},[n("a",{staticClass:"c-btn c-btn--naked",attrs:{href:t.place.link,target:"_blank"}},[e._v("\n              Link\n            ")])]),e._v(" "),n("li",{staticClass:"c-my-gem__btn"},[n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(t){e.deleting=a}}},[e._v("\n              Trash\n            ")])])])]),e._v(" "),e.deleting===a?n("div",{staticClass:"c-my-gem__delete"},[e._v("\n        Are you sure you want to delete this gem?\n        "),n("div",{staticClass:"c-my-gem__delete-btns"},[n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(n){e.deleteGem(t)}}},[e._v("Yes")]),e._v(" "),n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(t){e.deleting=null}}},[e._v("No")])])]):e._e()])}))])},staticRenderFns:[]},Q=n("VU/8")(j,Z,!1,null,null,null).exports,J={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-info-window"},[e.place?[n("div",{staticClass:"c-info-window__img",style:{backgroundImage:"url("+e.place.image_url+")"},attrs:{alt:"place-photo"}}),e._v(" "),n("b",{staticClass:"c-info-window__title"},[e._v(e._s(e.place.name))]),e._v(" "),n("ul",{staticClass:"c-info-window__links"},[n("li",{staticClass:"c-info-window__link"},[n("a",{staticClass:"c-btn c-btn--naked",attrs:{href:e.place.url,target:"_blank"}},[e._v("\n          Link\n        ")])]),e._v(" "),n("li",{staticClass:"c-info-window__link"},[n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(t){t.preventDefault(),e.addToItinerary(e.place)}}},[e._v("\n          Save\n        ")])])])]:e._e()],2)},staticRenderFns:[]};var ee=n("VU/8")({name:"InfoWindow",props:["place","addToItinerary","itineraries"],data:function(){return{itinerary:null}},watch:{itineraries:function(){this.itineraries.length&&(this.itinerary=this.itineraries[0][".key"])}}},J,!1,function(e){n("oXX5")},"data-v-26299afc",null).exports,te=n("It2I"),ne=n.n(te),ae={name:"User",props:["user"],data:function(){return{message:""}},methods:{userSettings:function(){},signIn:function(){var e=new ne.a.auth.TwitterAuthProvider;ne.a.auth().signInWithRedirect(e)},signOut:function(){ne.a.auth().signOut().then(function(){console.log("signed out")}).catch(function(e){console.log(e)})}}},se={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-user"},[e.user?[n("div",{staticClass:"c-user__details c-user__details--signed-in"},[n("div",{staticClass:"c-user__icon",style:{"background-image":"url("+e.user.photoURL+")"}}),e._v(" "),n("h2",{staticClass:"c-user__name"},[e._v("\n        "+e._s(e.user.displayName)+"\n      ")])]),e._v(" "),n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(t){return t.preventDefault(),e.signOut(t)}}},[e._v("\n      Sign out\n    ")])]:[e._m(0),e._v(" "),n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(t){return t.preventDefault(),e.signIn(t)}}},[e._v("\n      Sign in\n    ")])]],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"c-user__details"},[t("h2",{staticClass:"c-user__name"},[this._v("\n        Guest\n      ")]),this._v(" "),t("span",[this._v("Sign in to claim places")])])}]},ie={name:"Initial",props:["google"],data:function(){return{googleMaps:null,loading:!1,itinerary:null,user:null,menu:{places:!0},infoWindow:{el:null,content:null},globalMap:null,selectedActiv:[],globalMarkers:[],itineraries:[],itineraryList:[],showPlaces:!1}},created:function(){var e=this;return k()(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e,M.a.auth().onAuthStateChanged(function(t){return e.user=t}),e.google.load(function(t){e.googleMaps=t.maps,e.infoWindow.el=new t.maps.InfoWindow({content:e.$refs.info.$el})});case 3:case"end":return t.stop()}},t,e)}))()},methods:{updateMap:function(e){this.globalMap=e},updateMarkers:function(e){this.globalMarkers=e},clearMarkers:function(){var e=this;return k()(y.a.mark(function t(){var n;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.abrupt("return",new _.a(function(e,t){for(var a=0;a<n.globalMarkers.length;a++)n.globalMarkers[a].setMap(null);n.globalMarkers=[],e()}));case 2:case"end":return t.stop()}},t,e)}))()},addToItinerary:function(e){var t={};if(e.place){var n=null,a=null,s=!0,i=!1,r=void 0;try{for(var o,c=v()(e.place.address_components);!(s=(o=c.next()).done);s=!0){var l=o.value;l.types.includes("postal_town")?n=l.short_name:l.types.includes("country")&&(a=l.short_name)}}catch(e){i=!0,r=e}finally{try{!s&&c.return&&c.return()}finally{if(i)throw r}}t={place:{users:f()({},this.user.uid,{id:this.user.uid,displayName:this.user.displayName,photoURL:this.user.photoURL}),id:e.place.id,name:e.place.name,city:n,country:a,pos:{lat:e.place.geometry.location.lat(),lng:e.place.geometry.location.lng()},image_url:void 0!==e.place.photos?e.place.photos[0].getUrl({maxWidth:100,maxHeight:100}):"",link:e.url}}}else t={users:f()({},this.user.uid,{id:this.user.uid,displayName:this.user.displayName,photoURL:this.user.photoURL}),place:{id:e.id,name:e.name,city:e.location.city,country:e.location.country,pos:{lat:e.coordinates.latitude,lng:e.coordinates.longitude},image_url:e.image_url,link:e.url}};B.ref("gems").push(t)},getPlaces:function(e){this.itineraryList=e,this.showPlaces=!0},getItineraries:function(){this.showPlaces=!1},panMap:function(e){for(var t=new e.maps.LatLngBounds,n=0;n<this.globalMarkers.length;n++)t.extend(this.globalMarkers[n].getPosition());this.globalMap.fitBounds(t)}},computed:{radius:function(){var e=void 0,t=this.globalMap.getBounds(),n=this.globalMap.getCenter();if(t&&n){var a=t.getNorthEast();e=this.googleMaps.geometry.spherical.computeDistanceBetween(n,a)}return Math.floor(e)}},watch:{itineraries:function(){this.itineraries.length&&(this.itinerary=this.itineraries[0][".key"])}},components:{LocationSearch:S,FindPlaces:X,Map:A,MyGems:Q,InfoWindow:ee,User:n("VU/8")(ae,se,!1,null,null,null).exports}},re={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"o-root"},[e.globalMap?e._e():n("div",{staticClass:"spinner"}),e._v(" "),e.globalMap?n("main",{staticClass:"o-main"},[n("User",{attrs:{user:e.user}}),e._v(" "),n("div",{staticClass:"c-menu"},[n("ul",{staticClass:"c-menu__tabs"},[n("li",{staticClass:"c-menu__tab"},[n("button",{staticClass:"c-menu__tab-btn",class:{" c-menu__tab-btn--is-active":!0===e.menu.places},on:{click:function(t){e.menu.places=!0}}},[e._v("\n            Discover\n          ")])]),e._v(" "),n("li",{staticClass:"c-menu__tab"},[n("button",{staticClass:"c-menu__tab-btn",class:{" c-menu__tab-btn--is-active":!1===e.menu.places},attrs:{disabled:!e.user},on:{click:function(t){e.menu.places=!1}}},[e._v("\n            My gems\n          ")])])]),e._v(" "),n("div",{staticClass:"c-menu__cont"},[n("LocationSearch",{directives:[{name:"show",rawName:"v-show",value:e.menu.places,expression:"menu.places"}],staticClass:"c-form__item",attrs:{map:e.globalMap}}),e._v(" "),n("FindPlaces",{directives:[{name:"show",rawName:"v-show",value:e.menu.places,expression:"menu.places"}],attrs:{user:e.user,map:e.globalMap,radius:e.radius,infoWindow:e.infoWindow,addToItinerary:e.addToItinerary},on:{emitMarkers:e.updateMarkers,clearMarkers:e.clearMarkers}}),e._v(" "),e.user?n("MyGems",{directives:[{name:"show",rawName:"v-show",value:!e.menu.places,expression:"!menu.places"}],attrs:{user:e.user}}):e._e()],1)]),e._v(" "),n("img",{attrs:{src:"/arrow-down.svg"}})],1):e._e(),e._v(" "),e.googleMaps?n("aside",{staticClass:"o-aside"},[n("Map",{attrs:{markers:e.globalMarkers,infoWindow:e.infoWindow},on:{emitMap:e.updateMap}})],1):e._e(),e._v(" "),n("InfoWindow",{ref:"info",attrs:{place:e.infoWindow.content,itineraries:e.itineraries,addToItinerary:e.addToItinerary}})],1)},staticRenderFns:[]},oe=n("VU/8")(ie,re,!1,null,null,null).exports;a.a.use(m.a);var ce=new m.a({routes:[{path:"/",name:"Initial",component:oe}]});n("H/op");a.a.use(i.a),a.a.config.productionTip=!1,new a.a({el:"#app",router:ce,components:{App:p},template:"<App/>"})},oXX5:function(e,t){},yOnu:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c9daedc65eb946c5a09c.js.map