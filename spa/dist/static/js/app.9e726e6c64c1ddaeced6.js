webpackJsonp([1],{"H+ap":function(e,t){e.exports={activities:[{name:"park"},{name:"music"},{name:"cycling"},{name:"pub"},{name:"food"},{name:"shopping"},{name:"movies"},{name:"bouldering"},{name:"snowboarding"},{name:"climbing"},{name:"skatehboardng"},{name:"surfing"}]}},"H/op":function(e,t){},IxXz:function(e,t){e.exports={keys:{GOOGLEMAPS:"AIzaSyCS0KrhCnNOyW__KqWeeN-ZCC0ZuQNd3m4",FIREBASE:"AIzaSyD5iTbGZz3murpqAeONbujZXiz2Wkek8hE",YELP:"Ofpipn5mCCKKjnxKryn-AKZgv6HTrs1dMI-oomDEvGqvOubCN35uPZ5MDCowjkmpqq97mGLfdABNVvFOQi2COBNDLcPPJT0oCpDi93wpkOk-hwg6lAqAEpCQnD7WWnYx"}}},KKye:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzEiIGhlaWdodD0iNDMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNMTUuNSA0Mi4yNTNsMTIuMDYzLTkuMjQ4YTcuNSA3LjUgMCAwIDAgMi45MzctNS45NTJWOEE3LjUgNy41IDAgMCAwIDIzIC41SDhBNy41IDcuNSAwIDAgMCAuNSA4djE5LjA1M2E3LjUgNy41IDAgMCAwIDIuOTM3IDUuOTUyTDE1LjUgNDIuMjUzeiIgc3Ryb2tlPSIjNkI2QjZCIiBmaWxsPSIjRkZGIi8+PHBhdGggZD0iTTE1LjUgMzMuODNsLS4zMzUtLjI4M0M3Ljk1NSAyNy41OTcgNiAyNS41IDYgMjIuMWMwLTIuODMzIDIuMjM1LTUuMSA1LjAzLTUuMSAyLjI5IDAgMy41NzYgMS4zMDMgNC40NyAyLjMyMy44OTQtMS4wMiAyLjE4LTIuMzIzIDQuNDctMi4zMjMgMi43OTUgMCA1LjAzIDIuMjY3IDUuMDMgNS4xIDAgMy40LTEuOTU2IDUuNDk3LTkuMTY1IDExLjQ0N2wtLjMzNS4yODN6IiBmaWxsPSIjRkY2RjZGIi8+PHBhdGggZD0iTTE1LjUgMzMuODNsLS4zMzUtLjI4M0M3Ljk1NSAyNy41OTcgNiAyNS41IDYgMjIuMWMwLTIuODMzIDIuMjM1LTUuMSA1LjAzLTUuMSAyLjI5IDAgMy41NzYgMS4zMDMgNC40NyAyLjMyMy44OTQtMS4wMiAyLjE4LTIuMzIzIDQuNDctMi4zMjMgMi43OTUgMCA1LjAzIDIuMjY3IDUuMDMgNS4xIDAgMy40LTEuOTU2IDUuNDk3LTkuMTY1IDExLjQ0N2wtLjMzNS4yODN6bS00LjQ3LTE1LjY5N2MtMi4xOCAwLTMuOTEyIDEuNzU3LTMuOTEyIDMuOTY3IDAgMi44OSAxLjc4OCA0LjgxNyA4LjM4MiAxMC4yNTcgNi41OTQtNS40NCA4LjM4Mi03LjM2NyA4LjM4Mi0xMC4yNTcgMC0yLjIxLTEuNzMyLTMuOTY3LTMuOTExLTMuOTY3LTEuOTU2IDAtMy4wMTggMS4xOS0zLjg1NiAyLjE1NGwtLjYxNS43MzYtLjYxNS0uNzM2Yy0uODM4LS45NjQtMS45LTIuMTU0LTMuODU2LTIuMTU0eiIgZmlsbD0iIzZCNkI2QiIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPgo="},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),s=n("1mcD"),i=n.n(s),c=n("IxXz");gm.KEY=c.keys.GOOGLEMAPS,gm.LIBRARIES=["places","geometry"];var r={name:"App",data:function(){return{googleMaps:null}},created:function(){var e=this;gm.load(function(t){e.googleMaps=t.maps})}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"o-app",attrs:{id:"app"}},[t("router-view",{attrs:{googleMaps:this.googleMaps}})],1)},staticRenderFns:[]},o=n("VU/8")(r,l,!1,null,null,null).exports,u=n("/ocq"),m=n("BO1k"),d=n.n(m),g=n("bOdI"),p=n.n(g),v=n("//Fk"),h=n.n(v),M=n("Xxa5"),f=n.n(M),_=n("exGp"),y=n.n(_),I=n("Sazm"),w=n.n(I),L={calcPrimeLocation:function(e){if(!(e.length>0))return!1;for(var t=e.length,n=0,a=0,s=0,i=0;i<e.length;i++){var c=e[i][0]*Math.PI/180,r=e[i][1]*Math.PI/180;n+=Math.cos(c)*Math.cos(r),a+=Math.cos(c)*Math.sin(r),s+=Math.sin(c)}n/=t,a/=t,s/=t;r=Math.atan2(a,n);var l=Math.sqrt(n*n+a*a),o=180*(c=Math.atan2(s,l))/Math.PI,u=180*r/Math.PI;return new Array(o,u)},pinSymbol:function(e){return{url:"M 0,0 C -2,-20 -10,-22 -10,-30 A 10,10 0 1,1 10,-30 C 10,-22 2,-20 0,0 z",fillColor:e,fillOpacity:1,scale:1}}},b={name:"Map",props:["emitMap","markers","infoWindow"],data:function(){return{position:{lat:0,lng:0},map:null,currentPlace:null,errors:[],myPosPin:null}},mounted:function(){this.initMap(),this.getLocation()},methods:{initMap:function(){var e=this;e.map=new google.maps.Map(this.$refs.map,{zoom:17,center:this.position,mapTypeControl:!1});var t=new google.maps.places.PlacesService(e.map);google.maps.event.addListener(e.map,"click",function(n){n.placeId&&(n.stop(),t.getDetails({placeId:n.placeId},function(t,n){var a=new google.maps.Marker({position:{lat:t.geometry.location.lat(),lng:t.geometry.location.lng()},map:e.map,title:t.name,visible:!1});e.infoWindow.el.open(e.map,a),"OK"===n&&(e.infoWindow.content={name:t.name,phone:t.formatted_phone_number,place:t,url:t.url,image_url:void 0!==t.photos?t.photos[0].getUrl({maxWidth:100,maxHeight:100}):""})}))}),this.yourPin=new google.maps.Marker({icon:L.pinSymbol("green")})},getLocation:function(){var e=this;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(t){var n=t.coords,a=new google.maps.LatLng(n.latitude,n.longitude);e.map.panTo(a),e.placeMyPosPin(n.latitude,n.longitude)},function(e){console.warn("ERROR("+e.code+"): "+e.message)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}},placeMyPosPin:function(e,t){var n=this;return y()(f.a.mark(function a(){return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n.myPosPin&&n.myPosPin.setMap(null),n.myPosPin=new google.maps.Marker({position:{lat:e,lng:t},icon:L.pinSymbol("green"),animation:google.maps.Animation.DROP}),n.myPosPin.setMap(n.map);case 3:case"end":return a.stop()}},a,n)}))()},whereToGo:function(){var e=this.markers.map(function(e){return[e.position.lat(),e.position.lng()]}),t=L.calcPrimeLocation(e);if(t){var n=new google.maps.LatLng(t[0],t[1]);this.yourPin.setPosition({lat:t[0],lng:t[1]}),this.yourPin.setMap(this.map),this.map.panTo(n)}else this.yourPin.setMap(null)}},watch:{map:function(){this.$emit("emitMap",this.map)}}},C={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"c-map"},[t("div",{staticClass:"c-map__btns"},[t("button",{staticClass:"c-map__location-btn",on:{click:this.getLocation}},[t("svg",{staticClass:"c-map__location-btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"38",height:"37",viewBox:"0 0 44 34"}},[t("defs",[t("filter",{attrs:{id:"a",width:"128%",height:"128%",x:"-14%",filterUnits:"objectBoundingBox"}},[t("feOffset",{attrs:{dy:"2",in:"SourceAlpha",result:"shadowOffsetOuter1"}}),t("feGaussianBlur",{attrs:{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"2"}}),t("feColorMatrix",{attrs:{in:"shadowBlurOuter1",result:"shadowMatrixOuter1",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"}}),t("feMerge",[t("feMergeNode",{attrs:{in:"shadowMatrixOuter1"}}),t("feMergeNode",{attrs:{in:"SourceGraphic"}})],1)],1)]),t("path",{attrs:{fill:"#EFEFEF","fill-rule":"evenodd",d:"M6.67 25.25l30.45-13.58-15.23 30.35-2.61-13.71z",filter:"url(#a)",transform:"translate(-3 -10)"}})])])]),this._v(" "),t("div",{ref:"map",staticClass:"c-map__canvas"})])},staticRenderFns:[]},N=n("VU/8")(b,C,!1,null,null,null).exports,k={name:"LocationSearch",props:["map","places"],data:function(){return{invalidPlace:!1}},mounted:function(){this.initLocationSearch()},methods:{initLocationSearch:function(){var e=this,t=this.$refs.loc,n=new google.maps.places.Autocomplete(t);n.addListener("place_changed",function(){var t=n.getPlace();if(t.geometry){t.types.includes("establishment")&&console.log(t),e.invalidPlace=!1;var a=new google.maps.LatLng(t.geometry.location.lat(),t.geometry.location.lng());e.map.panTo(a)}else e.invalidPlace=!0})}}},D={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("label",{staticClass:"c-label"},[this._v("Location search")]),this._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:this.invalidPlace,expression:"invalidPlace"}]},[this._v("Click to search")]),this._v(" "),t("input",{ref:"loc",staticClass:"c-text-input",attrs:{placeholder:"Search Location"}})])},staticRenderFns:[]},A=n("VU/8")(k,D,!1,null,null,null).exports,T=n("fZjL"),x=n.n(T),j=n("Gu7T"),S=n.n(j),P=(n("YtIj"),n("IxXz")),O=w.a.initializeApp({apiKey:P.keys.FIREBASE,authDomain:"do-more-ecc5c.firebaseapp.com",databaseURL:"https://do-more-ecc5c.firebaseio.com/",projectId:"do-more-ecc5c",storageBucket:"do-more-ecc5c.appspot.com",messagingSenderId:"669577878898"}).database(),U=n("mtWM"),z=n.n(U),E=n("RUzx"),W=n.n(E),Y=n("H+ap"),R=n.n(Y),B={name:"ActivitySelect",props:["getActivities"],components:{Multiselect:W.a},data:function(){return{value:null,options:R.a.activities}},watch:{value:function(e){var t=e.map(function(e){return e.name});this.$emit("getActivities",t)}}},G={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",{staticClass:"c-label"},[e._v("Activities")]),e._v(" "),n("multiselect",{staticClass:"c-multiselect-custom",attrs:{options:e.options,multiple:!0,"close-on-select":!0,"clear-on-select":!0,"hide-selected":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"name","preselect-first":!1,limit:3,showLabels:!0},scopedSlots:e._u([{key:"tag",fn:function(t){return n("div",{staticClass:"c-multiselect-custom__tag"},[n("span",{staticClass:"c-multiselect-custom__tag-name"},[e._v("\n        "+e._s(t.option.name)+"\n      ")]),e._v(" "),n("span",{staticClass:"c-multiselect-custom__tag-remove",on:{click:function(e){t.remove(t.option)}}},[e._v("\n        âœ•\n      ")])])}}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},staticRenderFns:[]};var Z=n("VU/8")(B,G,!1,function(e){n("yOnu")},null,null).exports,$={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-accordion"},[n("button",{staticClass:"c-accordion__btn",class:{"is-active":e.isOpen},on:{click:function(t){t.preventDefault(),e.isOpen=!e.isOpen}}},[e._v("\n    "+e._s(e.label)+"\n  ")]),e._v(" "),n("transition",{attrs:{name:"slide"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"c-accordion__drawer",class:{"is-active":e.isOpen}},[e._t("default")],2)])],1)},staticRenderFns:[]},F=n("VU/8")({name:"Accordion",props:["label"],data:function(){return{isOpen:!1}},methods:{}},$,!1,null,null,null).exports,Q={name:"Places",props:["places","claimPlace","user","page","loading","markers","map","infoWindow"],data:function(){return{currentlyHighlighted:null,loadingImgs:{}}},methods:{highlight:function(e,t,n){var a=this;this.currentlyHighlighted!==n&&(this.currentlyHighlighted=n,this.markers.forEach(function(n){n.place.id===t&&(a.infoWindow.el.open(a.map,n),a.infoWindow.content=e)}))},loadMore:function(){this.$emit("getPlaces")},imageLoaded:function(e){this.$set(this.loadingImgs,e,!1)}},watch:{places:function(e){var t=this,n=x()(this.loadingImgs);e.map(function(e){n.includes(e.id)||t.$set(t.loadingImgs,e.id,!0)})}}},H={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-my-gems"},[n("ul",{staticClass:"c-my-gems__list"},e._l(e.places,function(t,a){return n("li",{key:a,staticClass:"c-my-gem",on:{mouseover:function(n){e.highlight(t,t.id,a)}}},[n("div",{staticClass:"c-my-gem__cont"},[n("div",{staticClass:"c-my-gem__img-container",class:{"is-loading":e.loadingImgs[t.id]}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!e.loadingImgs[t.id],expression:"!loadingImgs[p.id]"}],staticClass:"c-my-gem__img",attrs:{src:t.image_url,alt:"place-photo"},on:{load:function(n){e.imageLoaded(t.id)}}})]),e._v(" "),n("div",{staticClass:"c-my-gem__details"},[n("div",{staticClass:"c-my-gem__name"},[e._v(e._s(t.name))]),e._v("\n          Shared by:\n          "),e._l(t.users,function(a,s){return t.users?n("div",{key:s},[e._v("\n            "+e._s(a.displayName)+"\n          ")]):e._e()})],2),e._v(" "),n("ul",{staticClass:"c-my-gem__btns"},[n("li",{staticClass:"c-my-gem__btn"},[n("a",{staticClass:"c-btn c-btn--naked",attrs:{href:t.url,target:"_blank"}},[e._v("\n              Link\n            ")])]),e._v(" "),n("li",{staticClass:"c-my-gem__btn"},[n("button",{staticClass:"c-btn c-btn--naked",attrs:{disabled:!e.user},on:{click:function(n){n.preventDefault(),e.claimPlace(t)}}},[e._v("\n              Claim\n            ")])])])])])})),e._v(" "),e.page>=1&&!e.loading?n("button",{staticClass:"c-btn",on:{click:function(t){return t.preventDefault(),e.loadMore(t)}}},[e._v("\n    Load More\n  ")]):e._e(),e._v(" "),e.page>=1&&e.loading?n("div",{staticClass:"spinner"}):e._e()])},staticRenderFns:[]},V=n("VU/8")(Q,H,!1,null,null,null).exports,J=n("fViJ"),K=n.n(J),q=n("KKye"),X=n.n(q),ee={name:"FindPlaces",props:["infoWindow","radius","map","claimPlace","user"],data:function(){var e;return e={page:0,places:[],markers:[],selected:[],searching:!1},p()(e,"places",null),p()(e,"sortBy","best_match"),e},methods:{getPlaces:function(){var e=this;return y()(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.searching=!0,0===e.page&&(e.places=[]),t.next=4,e.buildList();case 4:return t.next=6,e.placeYelpMarkers(e.places);case 6:e.places.length>=25&&(e.page+=1),e.searching=!1;case 8:case"end":return t.stop()}},t,e)}))()},search:function(){var e=this;return y()(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.page=0,t.next=3,e.getPlaces();case 3:case"end":return t.stop()}},t,e)}))()},buildList:function(){var e=this;return y()(f.a.mark(function t(){var n,a,s,i,c;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null,!(e.selected.length>0)){t.next=13;break}n=0;case 3:if(!(n<e.selected.length)){t.next=11;break}return t.next=6,e.getYelpPlaces(e.selected[n],e.radius,e.sortBy);case 6:s=t.sent,(a=e.places).push.apply(a,S()(s));case 8:n++,t.next=3;break;case 11:t.next=17;break;case 13:return t.next=15,e.getYelpPlaces(null,e.radius,e.sortBy);case 15:c=t.sent,(i=e.places).push.apply(i,S()(c));case 17:case"end":return t.stop()}},t,e)}))()},getYelpPlaces:function(e,t,n){var a=this;return y()(f.a.mark(function s(){var i,c,r,l;return f.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,a.map.center.lat();case 2:return i=s.sent,s.next=5,a.map.center.lng();case 5:return c=s.sent,s.prev=6,s.next=9,z.a.get("/api",{params:{lat:i,lng:c,offset:25*a.page,term:e,radius:t,sortBy:n}});case 9:return r=s.sent,l=r.data,s.abrupt("return",l);case 14:s.prev=14,s.t0=s.catch(6),console.log(s.t0);case 17:case"end":return s.stop()}},s,a,[[6,14]])}))()},getUsers:function(e,t){var n=this;O.ref("gems").orderByChild("place/id").equalTo(t).on("value",function(t){if(t.val())for(var a in t.val()){var s=t.val()[a];n.$set(e,"users",s.users)}})},placeYelpMarkers:function(e){var t=this;return y()(f.a.mark(function a(){var s,i,c;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.markers=[],t.$emit("clearMarkers"),s=t,i=f.a.mark(function a(i){var c,r;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.getUsers(e[i],e[i].id);case 2:c=e[i].users?String(x()(e[i].users).length):String(0),r=e[i].users?X.a:K.a,gm.load(function(t){var a=n("Xe03")(t.maps);s.markers[i]=new a({position:{lat:e[i].coordinates.latitude,lng:e[i].coordinates.longitude},labelContent:c,icon:r,map:s.map,labelAnchor:new t.maps.Point(15.5,42),labelClass:"marker-label"})}),s.markers[i].place=e[i],google.maps.event.addListener(s.markers[i],"click",function(){s.infoWindow.el.open(s.map,this),s.infoWindow.content=e[i]});case 7:case"end":return a.stop()}},a,t)}),c=0;case 5:if(!(c<e.length)){a.next=10;break}return a.delegateYield(i(c),"t0",7);case 7:c++,a.next=5;break;case 10:case"end":return a.stop()}},a,t)}))()},getActivities:function(e){this.selected=e}},watch:{selected:function(){this.page=0},markers:function(){this.$emit("emitMarkers",this.markers)}},components:{Accordion:F,ActivitySelect:Z,Places:V}},te={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Accordion",{attrs:{label:"Filter"}},[n("ActivitySelect",{on:{getActivities:e.getActivities}}),e._v(" "),n("div",[n("label",{staticClass:"c-label"},[e._v("Order")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.sortBy,expression:"sortBy"}],staticClass:"c-select",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.sortBy=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"distance"}},[e._v("Distance")]),e._v(" "),n("option",{attrs:{value:"best_match"}},[e._v("Best Match")]),e._v(" "),n("option",{attrs:{value:"rating"}},[e._v("Rating")]),e._v(" "),n("option",{attrs:{value:"review_count"}},[e._v("Review Count")])])])],1),e._v(" "),n("div",{staticClass:"u-txt-center"},[e.searching?n("div",{staticClass:"spinner"}):n("button",{staticClass:"c-btn",attrs:{disabled:e.searching},on:{click:function(t){return t.preventDefault(),e.search(t)}}},[e._v("\n      Search\n    ")])]),e._v(" "),e.places?n("Places",{attrs:{places:e.places,claimPlace:e.claimPlace,user:e.user,page:e.page,loading:e.searching,markers:e.markers,map:e.map,infoWindow:e.infoWindow},on:{getPlaces:e.getPlaces}}):e._e()],1)},staticRenderFns:[]},ne=n("VU/8")(ee,te,!1,null,null,null).exports,ae={name:"MyGems",props:["user"],data:function(){return{loading:!1,gems:[],deleting:null,loadingImgs:{}}},mounted:function(){var e=this;return y()(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getGems();case 2:case"end":return t.stop()}},t,e)}))()},methods:{getGems:function(){var e=this;return y()(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.loading=!0,e.$bindAsArray("gems",O.ref("gems").orderByChild("users/"+e.user.uid),null,function(){return e.loading=!1});case 2:case"end":return t.stop()}},t,e)}))()},deleteGem:function(e){var t=e[".key"];O.ref().child("gems").child(t).remove().then(function(){console.log("Remove succeeded.")}).catch(function(e){console.log("Remove failed: ",e.message)})},imageLoaded:function(e){this.$set(this.loadingImgs,e,!1)}},watch:{gems:function(e){var t=this,n=x()(this.loadingImgs);e.map(function(e){n.includes(e.place.id)||t.$set(t.loadingImgs,e.place.id,!0)})}}},se={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-my-gems"},[e._m(0),e._v(" "),e.loading?n("div",{staticClass:"spinner"}):n("ul",{staticClass:"c-my-gems__list"},e._l(e.gems,function(t,a){return n("li",{key:a,staticClass:"c-my-gem"},[n("div",{staticClass:"c-my-gem__cont"},[n("div",{staticClass:"c-my-gem__img-container",class:{"is-loading":e.loadingImgs[t.place.id]}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!e.loadingImgs[t.place.id],expression:"!loadingImgs[g.place.id]"}],staticClass:"c-my-gem__img",attrs:{src:t.place.image_url,alt:"place-photo"},on:{load:function(n){e.imageLoaded(t.place.id)}}})]),e._v(" "),n("div",{staticClass:"c-my-gem__details"},[n("div",{staticClass:"c-my-gem__name"},[e._v(e._s(t.place.name))]),e._v(" "),n("div",{staticClass:"c-my-gem__loc"},[e._v(e._s(t.place.city)+", "+e._s(t.place.country))])]),e._v(" "),n("ul",{staticClass:"c-my-gem__btns"},[n("li",{staticClass:"c-my-gem__btn"},[n("a",{staticClass:"c-btn c-btn--naked",attrs:{href:t.place.link,target:"_blank"}},[e._v("\n              Link\n            ")])]),e._v(" "),n("li",{staticClass:"c-my-gem__btn"},[n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(t){e.deleting=a}}},[e._v("\n              Trash\n            ")])])])]),e._v(" "),e.deleting===a?n("div",{staticClass:"c-my-gem__delete"},[e._v("\n        Are you sure you want to delete this gem?\n        "),n("div",{staticClass:"c-my-gem__delete-btns"},[n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(n){e.deleteGem(t)}}},[e._v("Yes")]),e._v(" "),n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(t){e.deleting=null}}},[e._v("No")])])]):e._e()])}))])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"c-my-gems__title"},[t("p",[this._v("Places you have discovered")])])}]},ie=n("VU/8")(ae,se,!1,null,null,null).exports,ce={name:"Finds",props:[],data:function(){return{loading:!1,gems:[],deleting:null,loadingImgs:{}}},mounted:function(){var e=this;return y()(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getGems();case 2:case"end":return t.stop()}},t,e)}))()},methods:{getGems:function(){var e=this;return y()(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.loading=!0,e.$bindAsArray("gems",O.ref("gems"),null,function(){return e.loading=!1});case 2:case"end":return t.stop()}},t,e)}))()},imageLoaded:function(e){this.$set(this.loadingImgs,e,!1)}},watch:{gems:function(e){var t=this,n=x()(this.loadingImgs);e.map(function(e){n.includes(e.place.id)||t.$set(t.loadingImgs,e.place.id,!0)})}}},re={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-my-gems"},[e._m(0),e._v(" "),e.loading?n("div",{staticClass:"spinner"}):n("ul",{staticClass:"c-my-gems__list"},e._l(e.gems,function(t,a){return n("li",{key:a,staticClass:"c-my-gem"},[n("div",{staticClass:"c-my-gem__cont"},[n("div",{staticClass:"c-my-gem__img-container",class:{"is-loading":e.loadingImgs[t.place.id]}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!e.loadingImgs[t.place.id],expression:"!loadingImgs[g.place.id]"}],staticClass:"c-my-gem__img",attrs:{src:t.place.image_url,alt:"place-photo"},on:{load:function(n){e.imageLoaded(t.place.id)}}})]),e._v(" "),n("div",{staticClass:"c-my-gem__details"},[n("div",{staticClass:"c-my-gem__name"},[e._v(e._s(t.place.name))]),e._v(" "),n("div",{staticClass:"c-my-gem__loc"},[e._v(e._s(t.place.city)+", "+e._s(t.place.country))]),e._v(" "),n("div",[e._v("Shared by:")]),e._v(" "),e._l(t.users,function(a,s){return t.users?n("div",{key:s},[e._v("\n            "+e._s(a.displayName)+"\n          ")]):e._e()})],2),e._v(" "),n("ul",{staticClass:"c-my-gem__btns"},[n("li",{staticClass:"c-my-gem__btn"},[n("a",{staticClass:"c-btn c-btn--naked",attrs:{href:t.place.link,target:"_blank"}},[e._v("\n              Link\n            ")])])])])])}))])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"c-my-gems__title"},[t("p",[this._v("Popular places being shared")])])}]},le=n("VU/8")(ce,re,!1,null,null,null).exports,oe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-info-window"},[e.place?[n("div",{staticClass:"c-info-window__img-container",class:{"is-loading":e.loading}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"c-info-window__img",attrs:{src:e.place.image_url,alt:"place-photo"},on:{load:function(t){e.loading=!1}}})]),e._v(" "),n("b",{staticClass:"c-info-window__title"},[e._v(e._s(e.place.name))]),e._v(" "),n("div",{staticClass:"c-info-window__shares"},[e._v("\n      Shared by:\n      "),e._l(e.place.users,function(t,a){return e.place.users?n("div",{key:a},[e._v("\n        "+e._s(t.displayName)+"\n      ")]):e._e()})],2),e._v(" "),n("ul",{staticClass:"c-info-window__links"},[n("li",{staticClass:"c-info-window__link"},[n("a",{staticClass:"c-btn c-btn--naked",attrs:{href:e.place.url,target:"_blank"}},[e._v("\n          Link\n        ")])]),e._v(" "),n("li",{staticClass:"c-info-window__link"},[n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(t){t.preventDefault(),e.claimPlace(e.place)}}},[e._v("\n          Save\n        ")])])])]:e._e()],2)},staticRenderFns:[]};var ue=n("VU/8")({name:"InfoWindow",props:["place","claimPlace","itineraries"],data:function(){return{itinerary:null,loading:!0}},computed:{id:function(){if(this.place)return this.place.id}},watch:{itineraries:function(){this.itineraries.length&&(this.itinerary=this.itineraries[0][".key"])},id:function(){this.loading=!0}}},oe,!1,function(e){n("s/fk")},"data-v-09eb6de8",null).exports,me=n("It2I"),de=n.n(me),ge={name:"User",props:["user"],data:function(){return{message:""}},methods:{userSettings:function(){},signIn:function(){var e=new de.a.auth.TwitterAuthProvider;de.a.auth().signInWithRedirect(e)},signOut:function(){de.a.auth().signOut().then(function(){console.log("signed out")}).catch(function(e){console.log(e)})},showUserMenu:function(){this.$emit("showUserMenu")}}},pe={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-user"},[e.user?[n("button",{staticClass:"c-user__details c-user__details--signed-in",on:{click:function(t){return t.preventDefault(),e.showUserMenu(t)}}},[n("div",{staticClass:"c-user__icon",style:{"background-image":"url("+e.user.photoURL+")"}}),e._v(" "),n("h2",{staticClass:"c-user__name"},[e._v("\n        "+e._s(e.user.displayName)+"\n      ")])]),e._v(" "),n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(t){return t.preventDefault(),e.signOut(t)}}},[e._v("\n      Sign out\n    ")])]:[e._m(0),e._v(" "),n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(t){return t.preventDefault(),e.signIn(t)}}},[e._v("\n      Sign in\n    ")])]],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"c-user__details"},[t("h2",{staticClass:"c-user__name"},[this._v("\n        Guest\n      ")]),this._v(" "),t("span",[this._v("Sign in to claim places")])])}]},ve={name:"Initial",props:["googleMaps"],data:function(){return{itinerary:null,user:null,menu:0,infoWindow:{el:null,content:null},globalMap:null,selectedActiv:[],globalMarkers:[],showPlaces:!1}},created:function(){var e=this;return y()(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e,w.a.auth().onAuthStateChanged(function(t){return e.user=t}),gm.load(function(t){e.infoWindow.el=new t.maps.InfoWindow({content:e.$refs.infoW.$el})});case 3:case"end":return t.stop()}},t,e)}))()},methods:{updateMap:function(e){this.globalMap=e},updateMarkers:function(e){this.globalMarkers=e},clearMarkers:function(){var e=this;return y()(f.a.mark(function t(){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.abrupt("return",new h.a(function(e,t){for(var a=0;a<n.globalMarkers.length;a++)n.globalMarkers[a].setMap(null);n.globalMarkers=[],e()}));case 2:case"end":return t.stop()}},t,e)}))()},claimPlace:function(e){var t={};if(e.place){var n=null,a=null,s=!0,i=!1,c=void 0;try{for(var r,l=d()(e.place.address_components);!(s=(r=l.next()).done);s=!0){var o=r.value;o.types.includes("postal_town")?n=o.short_name:o.types.includes("country")&&(a=o.short_name)}}catch(e){i=!0,c=e}finally{try{!s&&l.return&&l.return()}finally{if(i)throw c}}t={place:{users:p()({},this.user.uid,{id:this.user.uid,displayName:this.user.displayName,photoURL:this.user.photoURL}),id:e.place.id,name:e.place.name,city:n,country:a,pos:{lat:e.place.geometry.location.lat(),lng:e.place.geometry.location.lng()},image_url:void 0!==e.place.photos?e.place.photos[0].getUrl({maxWidth:100,maxHeight:100}):"",link:e.url}}}else t={users:p()({},this.user.uid,{id:this.user.uid,displayName:this.user.displayName,photoURL:this.user.photoURL}),place:{id:e.id,name:e.name,city:e.location.city,country:e.location.country,pos:{lat:e.coordinates.latitude,lng:e.coordinates.longitude},image_url:e.image_url,link:e.url}};O.ref("gems").push(t)},getPlaces:function(e){this.itineraryList=e,this.showPlaces=!0},getItineraries:function(){this.showPlaces=!1},panMap:function(e){for(var t=new e.maps.LatLngBounds,n=0;n<this.globalMarkers.length;n++)t.extend(this.globalMarkers[n].getPosition());this.globalMap.fitBounds(t)}},computed:{radius:function(){var e=void 0,t=this.globalMap.getBounds(),n=this.globalMap.getCenter();if(t&&n){var a=t.getNorthEast();e=this.googleMaps.geometry.spherical.computeDistanceBetween(n,a)}return Math.floor(e)}},components:{LocationSearch:A,FindPlaces:ne,Map:N,MyGems:ie,Finds:le,InfoWindow:ue,User:n("VU/8")(ge,pe,!1,null,null,null).exports}},he={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"o-root"},[e.globalMap?e._e():n("div",{staticClass:"spinner"}),e._v(" "),e.globalMap?n("main",{staticClass:"o-main"},[n("User",{attrs:{user:e.user},on:{showUserMenu:function(t){e.menu=3}}}),e._v(" "),n("div",{staticClass:"c-menu"},[n("ul",{staticClass:"c-menu__tabs"},[n("li",{staticClass:"c-menu__tab"},[n("button",{staticClass:"c-menu__tab-btn",class:{" c-menu__tab-btn--is-active":0===e.menu},on:{click:function(t){e.menu=0}}},[e._v("\n            Discover\n          ")])]),e._v(" "),n("li",{staticClass:"c-menu__tab"},[n("button",{staticClass:"c-menu__tab-btn",class:{" c-menu__tab-btn--is-active":2===e.menu},attrs:{disabled:!e.user},on:{click:function(t){e.menu=2}}},[e._v("\n            Hot\n          ")])])]),e._v(" "),n("div",{staticClass:"c-menu__cont"},[n("LocationSearch",{directives:[{name:"show",rawName:"v-show",value:0===e.menu,expression:"menu === 0"}],staticClass:"c-form__item",attrs:{map:e.globalMap}}),e._v(" "),n("FindPlaces",{directives:[{name:"show",rawName:"v-show",value:0===e.menu,expression:"menu === 0"}],attrs:{user:e.user,map:e.globalMap,radius:e.radius,infoWindow:e.infoWindow,claimPlace:e.claimPlace},on:{emitMarkers:e.updateMarkers,clearMarkers:e.clearMarkers}}),e._v(" "),2===e.menu?n("Finds"):e._e(),e._v(" "),e.user?n("MyGems",{directives:[{name:"show",rawName:"v-show",value:3===e.menu,expression:"menu === 3"}],attrs:{user:e.user}}):e._e()],1)])],1):e._e(),e._v(" "),e.googleMaps?n("aside",{staticClass:"o-aside"},[n("Map",{attrs:{markers:e.globalMarkers,infoWindow:e.infoWindow},on:{emitMap:e.updateMap}})],1):e._e(),e._v(" "),n("InfoWindow",{ref:"infoW",attrs:{place:e.infoWindow.content,claimPlace:e.claimPlace}})],1)},staticRenderFns:[]},Me=n("VU/8")(ve,he,!1,null,null,null).exports;a.a.use(u.a);var fe=new u.a({routes:[{path:"/",name:"Initial",component:Me}]});n("H/op");a.a.use(i.a),a.a.config.productionTip=!1,new a.a({el:"#app",router:fe,components:{App:o},template:"<App/>"})},fViJ:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzEiIGhlaWdodD0iNDMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNMTUuNSA0Mi4yNTNsMTIuMDYzLTkuMjQ4YTcuNSA3LjUgMCAwIDAgMi45MzctNS45NTJWOEE3LjUgNy41IDAgMCAwIDIzIC41SDhBNy41IDcuNSAwIDAgMCAuNSA4djE5LjA1M2E3LjUgNy41IDAgMCAwIDIuOTM3IDUuOTUyTDE1LjUgNDIuMjUzeiIgc3Ryb2tlPSIjNkI2QjZCIiBmaWxsPSIjRkZGIi8+PHBhdGggZD0iTTE1LjUgMzMuODNsLS4zMzUtLjI4M0M3Ljk1NSAyNy41OTcgNiAyNS41IDYgMjIuMWMwLTIuODMzIDIuMjM1LTUuMSA1LjAzLTUuMSAyLjI5IDAgMy41NzYgMS4zMDMgNC40NyAyLjMyMy44OTQtMS4wMiAyLjE4LTIuMzIzIDQuNDctMi4zMjMgMi43OTUgMCA1LjAzIDIuMjY3IDUuMDMgNS4xIDAgMy40LTEuOTU2IDUuNDk3LTkuMTY1IDExLjQ0N2wtLjMzNS4yODN6IiBmaWxsPSIjRDdEN0Q3Ii8+PHBhdGggZD0iTTE1LjUgMzMuODNsLS4zMzUtLjI4M0M3Ljk1NSAyNy41OTcgNiAyNS41IDYgMjIuMWMwLTIuODMzIDIuMjM1LTUuMSA1LjAzLTUuMSAyLjI5IDAgMy41NzYgMS4zMDMgNC40NyAyLjMyMy44OTQtMS4wMiAyLjE4LTIuMzIzIDQuNDctMi4zMjMgMi43OTUgMCA1LjAzIDIuMjY3IDUuMDMgNS4xIDAgMy40LTEuOTU2IDUuNDk3LTkuMTY1IDExLjQ0N2wtLjMzNS4yODN6bS00LjQ3LTE1LjY5N2MtMi4xOCAwLTMuOTEyIDEuNzU3LTMuOTEyIDMuOTY3IDAgMi44OSAxLjc4OCA0LjgxNyA4LjM4MiAxMC4yNTcgNi41OTQtNS40NCA4LjM4Mi03LjM2NyA4LjM4Mi0xMC4yNTcgMC0yLjIxLTEuNzMyLTMuOTY3LTMuOTExLTMuOTY3LTEuOTU2IDAtMy4wMTggMS4xOS0zLjg1NiAyLjE1NGwtLjYxNS43MzYtLjYxNS0uNzM2Yy0uODM4LS45NjQtMS45LTIuMTU0LTMuODU2LTIuMTU0eiIgZmlsbD0iIzZCNkI2QiIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPgo="},"s/fk":function(e,t){},yOnu:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9e726e6c64c1ddaeced6.js.map