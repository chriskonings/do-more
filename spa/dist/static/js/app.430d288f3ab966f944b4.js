webpackJsonp([1],{"3GDu":function(e,t,n){"use strict";var a=n("Xxa5"),s=n.n(a),i=n("exGp"),r=n.n(i),c={name:"Map",props:["emitMap","markers","infoWindow","google"],data:function(){return{position:{lat:0,lng:0},map:null,currentPlace:null,errors:[],myPosPin:null}},mounted:function(){this.initMap()},methods:{initMap:function(){var e=this,t=this.google,n=this.$utils.pinSymbol("green");this.map=new t.maps.Map(this.$refs.map,{zoom:15,center:this.position,mapTypeControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]}),this.getLocation();var a=new t.maps.places.PlacesService(this.map);t.maps.event.addListener(this.map,"click",function(n){n.placeId&&(n.stop(),a.getDetails({placeId:n.placeId},function(n,a){var s=n.geometry.location.lat(),i=n.geometry.location.lng(),r=new t.maps.Marker({position:{lat:s,lng:i},map:e.map,title:n.name,visible:!1});e.infoWindow.el.open(e.map,r),"OK"===a&&(e.infoWindow.content={name:n.name,phone:n.formatted_phone_number,place:n,url:n.url,image_url:void 0!==n.photos?n.photos[0].getUrl({maxWidth:100,maxHeight:100}):""})}))}),this.yourPin=new t.maps.Marker({icon:n})},getLocation:function(){var e=this,t=this.google;if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(n){var a=n.coords,s=new t.maps.LatLng(a.latitude,a.longitude);e.map.panTo(s),e.placeMyPosPin(a.latitude,a.longitude)},function(e){console.warn("ERROR("+e.code+"): "+e.message)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}},placeMyPosPin:function(e,t){var n=this;return r()(s.a.mark(function a(){var i;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:i=n.google,n.myPosPin&&n.myPosPin.setMap(null),n.myPosPin=new i.maps.Marker({position:{lat:e,lng:t},icon:n.$utils.pinSymbol("green"),animation:i.maps.Animation.DROP}),n.myPosPin.setMap(n.map);case 4:case"end":return a.stop()}},a,n)}))()},whereToGo:function(){var e=this.google,t=this.markers.map(function(e){return[e.position.lat(),e.position.lng()]}),n=this.$utils.calcPrimeLocation(t);if(n){var a=new e.maps.LatLng(n[0],n[1]);this.yourPin.setPosition({lat:n[0],lng:n[1]}),this.yourPin.setMap(this.map),this.map.panTo(a)}else this.yourPin.setMap(null)}},watch:{map:function(){this.$emit("emitMap",this.map)}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"c-map"},[t("div",{staticClass:"c-map__btns"},[t("button",{staticClass:"c-map__location-btn",on:{click:this.getLocation}},[t("svg",{staticClass:"c-map__location-btn-icon",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"38",height:"37",viewBox:"0 0 44 34"}},[t("defs",[t("filter",{attrs:{id:"a",width:"128%",height:"128%",x:"-14%",filterUnits:"objectBoundingBox"}},[t("feOffset",{attrs:{dy:"2",in:"SourceAlpha",result:"shadowOffsetOuter1"}}),t("feGaussianBlur",{attrs:{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:"2"}}),t("feColorMatrix",{attrs:{in:"shadowBlurOuter1",result:"shadowMatrixOuter1",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"}}),t("feMerge",[t("feMergeNode",{attrs:{in:"shadowMatrixOuter1"}}),t("feMergeNode",{attrs:{in:"SourceGraphic"}})],1)],1)]),t("path",{attrs:{fill:"#EFEFEF","fill-rule":"evenodd",d:"M6.67 25.25l30.45-13.58-15.23 30.35-2.61-13.71z",filter:"url(#a)",transform:"translate(-3 -10)"}})])])]),this._v(" "),t("div",{ref:"map",staticClass:"c-map__canvas"})])},staticRenderFns:[]},l=n("VU/8")(c,o,!1,null,null,null);t.a=l.exports},COvG:function(e,t,n){"use strict";var a=n("BO1k"),s=n.n(a),i=n("Xxa5"),r=n.n(i),c=n("Gu7T"),o=n.n(c),l=n("exGp"),u=n.n(l),d=n("bOdI"),p=n.n(d),f=n("MhFl"),m=n("mtWM"),g=n.n(m),h=n("RUzx"),v=n.n(h),M=n("H+ap"),_=n.n(M),y={name:"ActivitySelect",props:["getActivities"],components:{Multiselect:v.a},data:function(){return{value:null,options:_.a.activities}},watch:{value:function(e){var t=e.map(function(e){return e.name});this.$emit("getActivities",t)}}},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("label",{staticClass:"c-label"},[e._v("Activities")]),e._v(" "),n("multiselect",{staticClass:"c-multiselect-custom",attrs:{options:e.options,multiple:!0,"close-on-select":!0,"clear-on-select":!0,"hide-selected":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"name","preselect-first":!1,limit:3,showLabels:!0},scopedSlots:e._u([{key:"tag",fn:function(t){return n("div",{staticClass:"c-multiselect-custom__tag"},[n("span",{staticClass:"c-multiselect-custom__tag-name"},[e._v("\n        "+e._s(t.option.name)+"\n      ")]),e._v(" "),n("span",{staticClass:"c-multiselect-custom__tag-remove",on:{click:function(e){t.remove(t.option)}}},[e._v("\n        âœ•\n      ")])])}}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},staticRenderFns:[]};var L=n("VU/8")(y,w,!1,function(e){n("yOnu")},null,null).exports,I={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-accordion"},[n("button",{staticClass:"c-accordion__btn",class:{"is-active":e.isOpen},on:{click:function(t){t.preventDefault(),e.isOpen=!e.isOpen}}},[e._v("\n    "+e._s(e.label)+"\n  ")]),e._v(" "),n("transition",{attrs:{name:"slide"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"c-accordion__drawer",class:{"is-active":e.isOpen}},[e._t("default")],2)])],1)},staticRenderFns:[]},k=n("VU/8")({name:"Accordion",props:["label"],data:function(){return{isOpen:!1}},methods:{}},I,!1,null,null,null).exports,b=n("fZjL"),T=n.n(b),N={name:"Places",props:["places","savePlace","user","page","loading","markers","map","infoWindow"],data:function(){return{currentlyHighlighted:null,loadingImgs:{}}},methods:{highlight:function(e,t,n){var a=this;this.currentlyHighlighted!==n&&(this.currentlyHighlighted=n,this.markers.forEach(function(n){n.place.id===t&&(a.infoWindow.el.open(a.map,n),a.infoWindow.content=e)}))},deletePlace:function(e,t){var n=this;return u()(r.a.mark(function a(){var s,i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.a.get("/placeKeyById",{params:{placeId:t}});case 3:return s=a.sent,i=s.data,n.$emit("deletePlace",e,i),a.abrupt("return",i);case 9:return a.prev=9,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",a.t0);case 13:case"end":return a.stop()}},a,n,[[0,9]])}))()},loadMore:function(){this.$emit("getPlaces")},imageLoaded:function(e){this.$set(this.loadingImgs,e,!1)}},watch:{places:function(e){var t=this,n=T()(this.loadingImgs);e.map(function(e){n.includes(e.id)||t.$set(t.loadingImgs,e.id,!0)})}},components:{PlaceCard:n("Rk7O").a}},C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-my-finds"},[n("ul",{staticClass:"c-my-finds__list"},e._l(e.places,function(t,a){return n("PlaceCard",{key:a,attrs:{user:e.user,loading:e.loadingImgs[t.id],icon:t.image_url,name:t.name,link:t.url,users:t.users,identifier:a},on:{hover:function(n){e.highlight(t,t.id,a)},loaded:function(n){e.imageLoaded(t.id)},save:function(n){e.savePlace(t)},trash:function(n){e.deletePlace(t,t.id)}}})})),e._v(" "),e.page>=1&&!e.loading?n("button",{staticClass:"c-btn",on:{click:function(t){return t.preventDefault(),e.loadMore(t)}}},[e._v("\n    Load More\n  ")]):e._e(),e._v(" "),e.page>=1&&e.loading?n("div",{staticClass:"spinner"}):e._e()])},staticRenderFns:[]},D={name:"FindPlaces",props:["infoWindow","radius","map","savePlace","user","markers"],data:function(){var e;return e={page:0,places:[],selected:[],searching:!1},p()(e,"places",null),p()(e,"sortBy","best_match"),e},methods:{deletePlace:function(e,t){f.a.ref("finds/"+t).child("users").child(this.user.uid).remove().then(function(){console.log("Remove succeeded.")}).catch(function(e){console.log("Remove failed: ",e.message)}),f.a.ref("users/"+this.user.uid).child("saved/"+t).set(!1).then(function(){console.log("Remove succeeded.")}).catch(function(e){console.log("Remove failed: ",e.message)}),this.$delete(e.users,this.user.uid),this.$set(this.user.saved,t,!1);var n=this.$utils.newMarker(e,e.users,this.map,this.infoWindow,this.markers);this.$emit("createMarker",n)},getPlaces:function(){var e=this;return u()(r.a.mark(function t(){var n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.searching=!0,0===e.page&&(e.places=[]),t.next=4,e.buildList();case 4:a=t.sent,(n=e.places).push.apply(n,o()(a)),e.placeYelpMarkers(),e.places.length>=25&&(e.page+=1),e.searching=!1;case 9:case"end":return t.stop()}},t,e)}))()},search:function(){var e=this;return u()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.page=0,t.next=3,e.getPlaces();case 3:case"end":return t.stop()}},t,e)}))()},buildList:function(){var e=this;return u()(r.a.mark(function t(){var n,a,i,c,l,u,d,p,f;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],null,!(e.selected.length>0)){t.next=33;break}a=!0,i=!1,c=void 0,t.prev=6,l=s()(e.selected);case 8:if(a=(u=l.next()).done){t.next=17;break}return d=u.value,t.next=12,e.getYelpPlaces(d,e.radius,e.sortBy);case 12:p=t.sent,n.push.apply(n,o()(p));case 14:a=!0,t.next=8;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(6),i=!0,c=t.t0;case 23:t.prev=23,t.prev=24,!a&&l.return&&l.return();case 26:if(t.prev=26,!i){t.next=29;break}throw c;case 29:return t.finish(26);case 30:return t.finish(23);case 31:t.next=37;break;case 33:return t.next=35,e.getYelpPlaces(null,e.radius,e.sortBy);case 35:f=t.sent,n.push.apply(n,o()(f));case 37:return t.abrupt("return",e.getUsers(n));case 38:case"end":return t.stop()}},t,e,[[6,19,23,31],[24,,26,30]])}))()},getYelpPlaces:function(e,t,n){var a=this;return u()(r.a.mark(function s(){var i,c,o,l;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,a.map.center.lat();case 2:return i=s.sent,s.next=5,a.map.center.lng();case 5:return c=s.sent,s.prev=6,s.next=9,g.a.get("/getYelpResults",{params:{lat:i,lng:c,offset:25*a.page,term:e,radius:t,sortBy:n}});case 9:return o=s.sent,l=o.data,s.abrupt("return",l);case 14:s.prev=14,s.t0=s.catch(6),console.log(s.t0);case 17:case"end":return s.stop()}},s,a,[[6,14]])}))()},getUsers:function(e){var t=this;return u()(r.a.mark(function n(){var a,s,i,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.map(function(e){return e.id}),t.prev=1,t.next=4,g.a.get("/getPlaceUsers",{params:{places:a}});case 4:return s=t.sent,i=s.data,c=e.map(function(e,t){return e.users=i[t],e}),t.abrupt("return",c);case 10:return t.prev=10,t.t0=t.catch(1),console.log(t.t0),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}},n,t,[[1,10]])}))()},placeYelpMarkers:function(){var e=this;return u()(r.a.mark(function t(){var n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e,e.$emit("clearMarkers"),n=0;n<e.places.length;n++)a=e.$utils.newMarker(e.places[n],e.places[n].users,e.map,e.infoWindow,e.markers),e.$emit("createMarker",a);case 3:case"end":return t.stop()}},t,e)}))()},getActivities:function(e){this.selected=e}},watch:{selected:function(){this.page=0}},components:{Accordion:k,ActivitySelect:L,Places:n("VU/8")(N,C,!1,null,null,null).exports}},x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Accordion",{attrs:{label:"Filter"}},[n("ActivitySelect",{on:{getActivities:e.getActivities}}),e._v(" "),n("div",[n("label",{staticClass:"c-label"},[e._v("Order")]),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.sortBy,expression:"sortBy"}],staticClass:"c-select",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.sortBy=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"distance"}},[e._v("Distance")]),e._v(" "),n("option",{attrs:{value:"best_match"}},[e._v("Best Match")]),e._v(" "),n("option",{attrs:{value:"rating"}},[e._v("Rating")]),e._v(" "),n("option",{attrs:{value:"review_count"}},[e._v("Review Count")])])])],1),e._v(" "),n("div",{staticClass:"u-txt-center"},[e.searching?n("div",{staticClass:"spinner"}):n("button",{staticClass:"c-btn",attrs:{disabled:e.searching},on:{click:function(t){return t.preventDefault(),e.search(t)}}},[e._v("\n      Search\n    ")])]),e._v(" "),e.places?n("Places",{attrs:{places:e.places,savePlace:e.savePlace,user:e.user,page:e.page,loading:e.searching,markers:e.markers,map:e.map,infoWindow:e.infoWindow},on:{getPlaces:e.getPlaces,deletePlace:e.deletePlace}}):e._e()],1)},staticRenderFns:[]},P=n("VU/8")(D,x,!1,null,null,null);t.a=P.exports},"H+ap":function(e,t){e.exports={activities:[{name:"park"},{name:"music"},{name:"cycling"},{name:"pub"},{name:"food"},{name:"shopping"},{name:"movies"},{name:"bouldering"},{name:"snowboarding"},{name:"climbing"},{name:"skatehboardng"},{name:"surfing"}]}},"H/op":function(e,t){},KKye:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzEiIGhlaWdodD0iNDMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNMTUuNSA0Mi4yNTNsMTIuMDYzLTkuMjQ4YTcuNSA3LjUgMCAwIDAgMi45MzctNS45NTJWOEE3LjUgNy41IDAgMCAwIDIzIC41SDhBNy41IDcuNSAwIDAgMCAuNSA4djE5LjA1M2E3LjUgNy41IDAgMCAwIDIuOTM3IDUuOTUyTDE1LjUgNDIuMjUzeiIgc3Ryb2tlPSIjNkI2QjZCIiBmaWxsPSIjRkZGIi8+PHBhdGggZD0iTTE1LjUgMzMuODNsLS4zMzUtLjI4M0M3Ljk1NSAyNy41OTcgNiAyNS41IDYgMjIuMWMwLTIuODMzIDIuMjM1LTUuMSA1LjAzLTUuMSAyLjI5IDAgMy41NzYgMS4zMDMgNC40NyAyLjMyMy44OTQtMS4wMiAyLjE4LTIuMzIzIDQuNDctMi4zMjMgMi43OTUgMCA1LjAzIDIuMjY3IDUuMDMgNS4xIDAgMy40LTEuOTU2IDUuNDk3LTkuMTY1IDExLjQ0N2wtLjMzNS4yODN6IiBmaWxsPSIjRkY2RjZGIi8+PHBhdGggZD0iTTE1LjUgMzMuODNsLS4zMzUtLjI4M0M3Ljk1NSAyNy41OTcgNiAyNS41IDYgMjIuMWMwLTIuODMzIDIuMjM1LTUuMSA1LjAzLTUuMSAyLjI5IDAgMy41NzYgMS4zMDMgNC40NyAyLjMyMy44OTQtMS4wMiAyLjE4LTIuMzIzIDQuNDctMi4zMjMgMi43OTUgMCA1LjAzIDIuMjY3IDUuMDMgNS4xIDAgMy40LTEuOTU2IDUuNDk3LTkuMTY1IDExLjQ0N2wtLjMzNS4yODN6bS00LjQ3LTE1LjY5N2MtMi4xOCAwLTMuOTEyIDEuNzU3LTMuOTEyIDMuOTY3IDAgMi44OSAxLjc4OCA0LjgxNyA4LjM4MiAxMC4yNTcgNi41OTQtNS40NCA4LjM4Mi03LjM2NyA4LjM4Mi0xMC4yNTcgMC0yLjIxLTEuNzMyLTMuOTY3LTMuOTExLTMuOTY3LTEuOTU2IDAtMy4wMTggMS4xOS0zLjg1NiAyLjE1NGwtLjYxNS43MzYtLjYxNS0uNzM2Yy0uODM4LS45NjQtMS45LTIuMTU0LTMuODU2LTIuMTU0eiIgZmlsbD0iIzZCNkI2QiIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPgo="},"L/hj":function(e,t,n){"use strict";(function(e){var a=n("Xxa5"),s=n.n(a),i=n("exGp"),r=n.n(i),c=n("fZjL"),o=n.n(c),l=n("KKye"),u=n.n(l),d=n("fViJ"),p=n.n(d),f={generateId:function(){return(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()},newMarker:function(t,a,i,c,l){var d,f=this,m=void 0,g=a?o()(a).length:0,h=l?l.length:0,v=t.place?t.place:t,M=t.place?t.place.pos.lat:t.coordinates.latitude,_=t.place?t.place.pos.lng:t.coordinates.longitude,y=g?String(g):"0",w=g>=1?u.a:p.a,L=h&&h<=0?1:2*h;return e.load((d=r()(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n("Xe03")(t.maps),(m=new a({position:{lat:M,lng:_},labelContent:y,icon:w,map:i,zIndex:L,labelAnchor:new t.maps.Point(15.5,42),labelClass:"marker-label"})).place=v,t.maps.event.addListener(m,"click",function(){c.el.open(i,this),c.content=v});case 4:case"end":return e.stop()}},e,f)})),function(e){return d.apply(this,arguments)})),m},calcPrimeLocation:function(e){if(!(e.length>0))return!1;for(var t=e.length,n=0,a=0,s=0,i=0;i<e.length;i+=1){var r=e[i][0]*Math.PI/180,c=e[i][1]*Math.PI/180;n+=Math.cos(r)*Math.cos(c),a+=Math.cos(r)*Math.sin(c),s+=Math.sin(r)}n/=t,a/=t,s/=t;var o=Math.atan2(a,n),l=Math.sqrt(n*n+a*a);return[180*Math.atan2(s,l)/Math.PI,180*o/Math.PI]},pinSymbol:function(e){return{url:"M 0,0 C -2,-20 -10,-22 -10,-30 A 10,10 0 1,1 10,-30 C 10,-22 2,-20 0,0 z",fillColor:e,fillOpacity:1,scale:1}}};t.a=f}).call(t,n("lMsw"))},MhFl:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("Sazm"),s=n.n(a),i=n("YtIj"),r=(n.n(i),s.a.initializeApp({apiKey:void 0,authDomain:"do-more-ecc5c.firebaseapp.com",databaseURL:"https://do-more-ecc5c.firebaseio.com/",projectId:"do-more-ecc5c",storageBucket:"do-more-ecc5c.appspot.com",messagingSenderId:"669577878898"}).database())},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),s=n("1mcD"),i=n.n(s),r=n("xJD8"),c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"o-app",attrs:{id:"app"}},[t("router-view",{attrs:{google:this.google}})],1)},staticRenderFns:[]},o=n("VU/8")(r.a,c,!1,null,null,null).exports,l=n("/ocq"),u=n("tWeu"),d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"o-root"},[e.globalMap?e._e():n("div",{staticClass:"spinner"}),e._v(" "),e.globalMap?n("main",{staticClass:"o-main"},[n("User",{attrs:{user:e.user},on:{showUserMenu:function(t){e.menu=3}}}),e._v(" "),n("div",{staticClass:"c-menu"},[n("ul",{staticClass:"c-menu__tabs"},[n("li",{staticClass:"c-menu__tab"},[n("button",{staticClass:"c-menu__tab-btn",class:{" c-menu__tab-btn--is-active":0===e.menu},on:{click:function(t){e.menu=0}}},[e._v("\n            Discover\n          ")])]),e._v(" "),n("li",{staticClass:"c-menu__tab"},[n("button",{staticClass:"c-menu__tab-btn",class:{" c-menu__tab-btn--is-active":2===e.menu},attrs:{disabled:!e.user},on:{click:function(t){e.menu=2}}},[e._v("\n            Hot\n          ")])])]),e._v(" "),n("div",{staticClass:"c-menu__cont"},[n("LocationSearch",{directives:[{name:"show",rawName:"v-show",value:0===e.menu,expression:"menu === 0"}],staticClass:"c-form__item",attrs:{map:e.globalMap,google:e.google}}),e._v(" "),n("FindPlaces",{directives:[{name:"show",rawName:"v-show",value:0===e.menu,expression:"menu === 0"}],attrs:{user:e.user,map:e.globalMap,radius:e.radius,infoWindow:e.infoWindow,savePlace:e.savePlace,markers:e.globalMarkers},on:{emitMarkers:e.updateMarkers,clearMarkers:e.clearMarkers,createMarker:e.createMarker}}),e._v(" "),2===e.menu?n("HotList",{attrs:{user:e.user,map:e.globalMap,infoWindow:e.infoWindow,markers:e.globalMarkers},on:{panToPlace:e.panToPlace,savePlace:e.savePlace,createMarker:e.createMarker}}):e._e(),e._v(" "),e.user&&3===e.menu?n("MyFinds",{attrs:{map:e.globalMap,user:e.user,infoWindow:e.infoWindow,markers:e.globalMarkers},on:{panToPlace:e.panToPlace,createMarker:e.createMarker}}):e._e()],1)])],1):e._e(),e._v(" "),e.google?n("aside",{staticClass:"o-aside"},[n("Map",{attrs:{markers:e.globalMarkers,infoWindow:e.infoWindow,google:e.google},on:{emitMap:e.updateMap}})],1):e._e(),e._v(" "),n("InfoWindow",{ref:"infoW",attrs:{place:e.infoWindow.content,savePlace:e.savePlace}})],1)},staticRenderFns:[]},p=n("VU/8")(u.a,d,!1,null,null,null).exports;a.a.use(l.a);var f=new l.a({routes:[{path:"/",name:"Initial",component:p}]}),m=(n("MhFl"),n("H/op"),n("L/hj")),g={install:function(){a.a.utils=m.a,a.a.prototype.$utils=m.a}};a.a.use(g),a.a.use(i.a),a.a.config.productionTip=!1,new a.a({el:"#app",router:f,components:{App:o},template:"<App/>"})},Rk7O:function(e,t,n){"use strict";var a=n("Xxa5"),s=n.n(a),i=n("exGp"),r=n.n(i),c={name:"PlaceCard",props:["user","loading","icon","name","city","link","country","users","identifier"],data:function(){return{}},methods:{loaded:function(){this.$emit("loaded")},save:function(){this.$emit("save")},trash:function(){var e=this;return r()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$emit("trash");case 1:case"end":return t.stop()}},t,e)}))()},mouseover:function(){this.$emit("hover")},panToPlace:function(){this.$emit("panToPlace")}},watch:{},computed:{isSaved:function(){return this.users&&this.users[this.user.uid]}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"c-my-find",on:{mouseover:e.mouseover}},[n("div",{staticClass:"c-my-find__cont"},[n("div",{staticClass:"c-my-find__img-container",class:{"is-loading":e.loading}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"c-my-find__img",attrs:{src:e.icon,alt:"place-photo"},on:{load:e.loaded}})]),e._v(" "),n("div",{staticClass:"c-my-find__details"},[n("div",{staticClass:"c-my-find__name"},[e._v(e._s(e.name))]),e._v(" "),e.city||e.country?n("div",{staticClass:"c-my-find__loc"},[e._v(e._s(e.city)+", "+e._s(e.country))]):e._e(),e._v(" "),e.users?e._l(e.users,function(e,t){return n("div",{key:t},[n("div",{staticClass:"c-my-find__user-icon",style:{"background-image":"url("+e.photoURL+")"},attrs:{title:e.displayName}})])}):e._e()],2),e._v(" "),n("ul",{staticClass:"c-my-find__btns"},[n("li",{staticClass:"c-my-find__btn"},[n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(t){return t.preventDefault(),e.panToPlace(t)}}},[e._v("\n          Go to\n        ")])]),e._v(" "),n("li",{staticClass:"c-my-find__btn"},[n("a",{staticClass:"c-btn c-btn--naked",attrs:{href:e.link,target:"_blank"}},[e._v("\n          Link\n        ")])]),e._v(" "),n("li",{staticClass:"c-my-find__btn"},[e.isSaved?n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(t){return t.preventDefault(),e.trash(t)}}},[e._v("\n          Unsave\n        ")]):n("button",{staticClass:"c-btn c-btn--naked",attrs:{disabled:!e.user},on:{click:function(t){t.preventDefault(),e.save()}}},[e._v("\n          Save\n        ")])])])])])},staticRenderFns:[]},l=n("VU/8")(c,o,!1,null,null,null);t.a=l.exports},WIUX:function(e,t){},ZG2l:function(e,t,n){"use strict";var a=n("fZjL"),s=n.n(a),i=n("Xxa5"),r=n.n(i),c=n("exGp"),o=n.n(c),l=n("MhFl"),u={name:"HotList",props:["user","map","markers","infoWindow"],data:function(){return{loading:!1,finds:[],loadingImgs:{}}},mounted:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getfinds();case 2:case"end":return t.stop()}},t,e)}))()},methods:{savePlace:function(e){var t=this;return o()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.$emit("savePlace",e);case 1:case"end":return n.stop()}},n,t)}))()},getfinds:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.loading=!0,e.$bindAsArray("finds",l.a.ref("finds"),null,function(){e.loading=!1});case 2:case"end":return t.stop()}},t,e)}))()},imageLoaded:function(e){this.$set(this.loadingImgs,e,!1)},deletePlace:function(e,t){var n=this;return o()(r.a.mark(function a(){var s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:l.a.ref("finds/"+t).child("users").child(n.user.uid).remove().then(function(){console.log("Remove succeeded.")}).catch(function(e){console.log("Remove failed: ",e.message)}),l.a.ref("users/"+n.user.uid).child("saved/"+t).set(!1).then(function(){console.log("Remove succeeded.")}).catch(function(e){console.log("Remove failed: ",e.message)}),n.$delete(e.users,n.user.uid),n.$set(n.user.saved,t,!1),s=n.$utils.newMarker(e,e.users,n.map,n.infoWindow,n.markers),n.$emit("createMarker",s);case 6:case"end":return a.stop()}},a,n)}))()},panToPlace:function(e){this.$emit("panToPlace",e)}},watch:{finds:function(e){var t=this,n=s()(this.loadingImgs);e.map(function(e){n.includes(e.place.id)||t.$set(t.loadingImgs,e.place.id,!0)})}},computed:{sortedFinds:function(){return this.finds.slice(0).sort(function(e,t){return(e.users?s()(e.users).length:0)<(t.users?s()(t.users).length:0)?1:-1})}},components:{PlaceCard:n("Rk7O").a}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-my-finds"},[e._m(0),e._v(" "),e.loading?n("div",{staticClass:"spinner"}):n("ul",{staticClass:"c-my-finds__list"},e._l(e.sortedFinds,function(t,a){return n("PlaceCard",{key:a,attrs:{user:e.user,loading:e.loadingImgs[t.place.id],icon:t.place.image_url,name:t.place.name,city:t.place.city,link:t.place.link,country:t.place.country,users:t.users,identifier:a},on:{loaded:function(n){e.imageLoaded(t.place.id)},save:function(n){e.savePlace(t)},trash:function(n){e.deletePlace(t,t[".key"])},panToPlace:function(n){e.panToPlace(t)}}})}))])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"c-my-finds__title"},[t("p",[this._v("Popular places being shared")])])}]},p=n("VU/8")(u,d,!1,null,null,null);t.a=p.exports},dkK6:function(e,t,n){"use strict";var a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-info-window"},[e.place?[n("div",{staticClass:"c-info-window__img-container",class:{"is-loading":e.loading}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"c-info-window__img",attrs:{src:e.place.image_url,alt:"place-photo"},on:{load:function(t){e.loading=!1}}})]),e._v(" "),n("b",{staticClass:"c-info-window__title"},[e._v(e._s(e.place.name))]),e._v(" "),n("div",{staticClass:"c-info-window__shares"},[e._v("\n      Shared by:\n      "),e._l(e.place.users,function(t,a){return e.place.users?n("div",{key:a},[e._v("\n        "+e._s(t.displayName)+"\n      ")]):e._e()})],2),e._v(" "),n("ul",{staticClass:"c-info-window__links"},[n("li",{staticClass:"c-info-window__link"},[n("a",{staticClass:"c-btn c-btn--naked",attrs:{href:e.place.url,target:"_blank"}},[e._v("\n          Link\n        ")])]),e._v(" "),n("li",{staticClass:"c-info-window__link"},[n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(t){t.preventDefault(),e.savePlace(e.place)}}},[e._v("\n          Save\n        ")])])])]:e._e()],2)},staticRenderFns:[]};var s=n("VU/8")({name:"InfoWindow",props:["place","savePlace","itineraries"],data:function(){return{itinerary:null,loading:!0}},computed:{id:function(){if(this.place)return this.place.id}},watch:{itineraries:function(){this.itineraries.length&&(this.itinerary=this.itineraries[0][".key"])},id:function(){this.loading=!0}}},a,!1,function(e){n("WIUX")},"data-v-cc2ebfd0",null);t.a=s.exports},efrp:function(e,t,n){"use strict";var a=n("//Fk"),s=n.n(a),i=n("fZjL"),r=n.n(i),c=n("Xxa5"),o=n.n(c),l=n("exGp"),u=n.n(l),d=n("MhFl"),p={name:"Myfinds",props:["user","markers","map","infoWindow"],data:function(){return{loading:!1,deleting:null,loadingImgs:{},finds:{}}},mounted:function(){var e=this;return u()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getfinds();case 2:case"end":return t.stop()}},t,e)}))()},methods:{getfinds:function(){var e=this;return u()(o.a.mark(function t(){var n,a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.loading=!0,n=r()(e.user.saved),a=n.filter(function(t){return e.user.saved[t]}),i=a.map(function(t){return d.a.ref("finds/"+t).once("value").then(function(n){n.val()&&(e.finds[t]=n.val(),e.$set(e.loadingImgs,t,!0))})}),s.a.all(i).then(function(){e.loading=!1});case 5:case"end":return t.stop()}},t,e)}))()},deletePlace:function(e,t){d.a.ref("finds/"+t).child("users").child(this.user.uid).remove().then(function(){console.log("Remove succeeded.")}).catch(function(e){console.log("Remove failed: ",e.message)}),d.a.ref("users/"+this.user.uid).child("saved/"+t).set(!1).then(function(){console.log("Remove succeeded.")}).catch(function(e){console.log("Remove failed: ",e.message)}),this.$delete(e.users,this.user.uid),this.$set(this.user.saved,t,!1);var n=this.$utils.newMarker(e,e.users,this.map,this.infoWindow,this.markers);this.$emit("createMarker",n),this.$delete(this.finds,t)},imageLoaded:function(e){this.$set(this.loadingImgs,e,!1)},panToPlace:function(e){this.$emit("panToPlace",e)}},components:{PlaceCard:n("Rk7O").a}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-my-finds"},[e._m(0),e._v(" "),e.loading?n("div",{staticClass:"spinner"}):n("ul",{staticClass:"c-my-finds__list"},e._l(e.finds,function(t,a){return n("PlaceCard",{key:a,attrs:{user:e.user,loading:e.loadingImgs[a],icon:t.place.image_url,name:t.place.name,city:t.place.city,link:t.place.link,country:t.place.country,users:t.users,identifier:a},on:{loaded:function(t){e.imageLoaded(a)},trash:function(n){e.deletePlace(t,a)},panToPlace:function(n){e.panToPlace(t)}}})}))])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"c-my-finds__title"},[t("p",[this._v("Places you have discovered")])])}]},m=n("VU/8")(p,f,!1,null,null,null);t.a=m.exports},fViJ:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzEiIGhlaWdodD0iNDMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNMTUuNSA0Mi4yNTNsMTIuMDYzLTkuMjQ4YTcuNSA3LjUgMCAwIDAgMi45MzctNS45NTJWOEE3LjUgNy41IDAgMCAwIDIzIC41SDhBNy41IDcuNSAwIDAgMCAuNSA4djE5LjA1M2E3LjUgNy41IDAgMCAwIDIuOTM3IDUuOTUyTDE1LjUgNDIuMjUzeiIgc3Ryb2tlPSIjNkI2QjZCIiBmaWxsPSIjRkZGIi8+PHBhdGggZD0iTTE1LjUgMzMuODNsLS4zMzUtLjI4M0M3Ljk1NSAyNy41OTcgNiAyNS41IDYgMjIuMWMwLTIuODMzIDIuMjM1LTUuMSA1LjAzLTUuMSAyLjI5IDAgMy41NzYgMS4zMDMgNC40NyAyLjMyMy44OTQtMS4wMiAyLjE4LTIuMzIzIDQuNDctMi4zMjMgMi43OTUgMCA1LjAzIDIuMjY3IDUuMDMgNS4xIDAgMy40LTEuOTU2IDUuNDk3LTkuMTY1IDExLjQ0N2wtLjMzNS4yODN6IiBmaWxsPSIjRDdEN0Q3Ii8+PHBhdGggZD0iTTE1LjUgMzMuODNsLS4zMzUtLjI4M0M3Ljk1NSAyNy41OTcgNiAyNS41IDYgMjIuMWMwLTIuODMzIDIuMjM1LTUuMSA1LjAzLTUuMSAyLjI5IDAgMy41NzYgMS4zMDMgNC40NyAyLjMyMy44OTQtMS4wMiAyLjE4LTIuMzIzIDQuNDctMi4zMjMgMi43OTUgMCA1LjAzIDIuMjY3IDUuMDMgNS4xIDAgMy40LTEuOTU2IDUuNDk3LTkuMTY1IDExLjQ0N2wtLjMzNS4yODN6bS00LjQ3LTE1LjY5N2MtMi4xOCAwLTMuOTEyIDEuNzU3LTMuOTEyIDMuOTY3IDAgMi44OSAxLjc4OCA0LjgxNyA4LjM4MiAxMC4yNTcgNi41OTQtNS40NCA4LjM4Mi03LjM2NyA4LjM4Mi0xMC4yNTcgMC0yLjIxLTEuNzMyLTMuOTY3LTMuOTExLTMuOTY3LTEuOTU2IDAtMy4wMTggMS4xOS0zLjg1NiAyLjE1NGwtLjYxNS43MzYtLjYxNS0uNzM2Yy0uODM4LS45NjQtMS45LTIuMTU0LTMuODU2LTIuMTU0eiIgZmlsbD0iIzZCNkI2QiIgZmlsbC1ydWxlPSJub256ZXJvIi8+PC9nPjwvc3ZnPgo="},jFfm:function(e,t,n){"use strict";var a={name:"LocationSearch",props:["map","places","google"],data:function(){return{invalidPlace:!1}},mounted:function(){this.initLocationSearch()},methods:{initLocationSearch:function(){var e=this,t=this.google,n=this.$refs.loc,a=new t.maps.places.Autocomplete(n);a.addListener("place_changed",function(){var n=a.getPlace();if(n.geometry){n.types.includes("establishment")&&console.log(n),e.invalidPlace=!1;var s=new t.maps.LatLng(n.geometry.location.lat(),n.geometry.location.lng());e.map.panTo(s)}else e.invalidPlace=!0})}}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("label",{staticClass:"c-label"},[this._v("Location search")]),this._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:this.invalidPlace,expression:"invalidPlace"}]},[this._v("Click to search")]),this._v(" "),t("input",{ref:"loc",staticClass:"c-text-input",attrs:{placeholder:"Search Location"}})])},staticRenderFns:[]},i=n("VU/8")(a,s,!1,null,null,null);t.a=i.exports},jyJz:function(e,t,n){"use strict";var a=n("It2I"),s=n.n(a),i={name:"User",props:["user"],data:function(){return{message:""}},methods:{userSettings:function(){},signIn:function(){var e=new s.a.auth.TwitterAuthProvider;s.a.auth().signInWithRedirect(e)},signOut:function(){s.a.auth().signOut().then(function(){console.log("signed out")}).catch(function(e){console.log(e)})},showUserMenu:function(){this.$emit("showUserMenu")}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-user"},[e.user?[n("button",{staticClass:"c-user__details c-user__details--signed-in",on:{click:function(t){return t.preventDefault(),e.showUserMenu(t)}}},[n("div",{staticClass:"c-user__icon",style:{"background-image":"url("+e.user.photoURL+")"}}),e._v(" "),n("h2",{staticClass:"c-user__name"},[e._v("\n        "+e._s(e.user.displayName)+"\n      ")])]),e._v(" "),n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(t){return t.preventDefault(),e.signOut(t)}}},[e._v("\n      Sign out\n    ")])]:[e._m(0),e._v(" "),n("button",{staticClass:"c-btn c-btn--naked",on:{click:function(t){return t.preventDefault(),e.signIn(t)}}},[e._v("\n      Sign in\n    ")])]],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"c-user__details"},[t("h2",{staticClass:"c-user__name"},[this._v("\n        Guest\n      ")]),this._v(" "),t("span",[this._v("Sign in to save places")])])}]},c=n("VU/8")(i,r,!1,null,null,null);t.a=c.exports},tWeu:function(e,t,n){"use strict";(function(e){var a=n("fZjL"),s=n.n(a),i=n("//Fk"),r=n.n(i),c=n("Xxa5"),o=n.n(c),l=n("exGp"),u=n.n(l),d=n("bOdI"),p=n.n(d),f=n("Sazm"),m=n.n(f),g=n("3GDu"),h=n("jFfm"),v=n("COvG"),M=n("efrp"),_=n("ZG2l"),y=n("dkK6"),w=n("jyJz"),L=n("MhFl");function I(e){var t={uid:e.uid,displayName:e.displayName,photoURL:e.photoURL};return L.a.ref("users/"+e.uid).once("value").then(function(n){return n.val()?n.val():L.a.ref("users/"+e.uid).set(t,function(e){return e?(console.log(e),e):t})})}function k(e,t){var n={};if(e.place){var a=null,s=null;e.place.address_components.forEach(function(e){e.types.includes("locality")?a=e.short_name:e.types.includes("country")&&(s=e.short_name)}),n={users:p()({},t.uid,{id:t.uid,displayName:t.displayName,photoURL:t.photoURL}),place:{id:e.place.id,name:e.place.name,city:a,country:s,pos:{lat:e.place.geometry.location.lat(),lng:e.place.geometry.location.lng()},image_url:void 0!==e.place.photos?e.place.photos[0].getUrl({maxWidth:100,maxHeight:100}):"",link:e.url}}}else n={users:p()({},t.uid,{id:t.uid,displayName:t.displayName,photoURL:t.photoURL}),place:{id:e.id,name:e.name,city:e.location.city,country:e.location.country,pos:{lat:e.coordinates.latitude,lng:e.coordinates.longitude},image_url:e.image_url,link:e.url}};return n}t.a={name:"Initial",props:["google"],data:function(){return{user:null,menu:0,infoWindow:{el:null,content:null},globalMap:null,globalMarkers:[]}},created:function(){var t=this;return u()(o.a.mark(function n(){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:m.a.auth().onAuthStateChanged(function(e){I(e).then(function(e){t.user=e})}),e.load(function(e){t.infoWindow.el=new e.maps.InfoWindow({content:t.$refs.infoW.$el})});case 2:case"end":return n.stop()}},n,t)}))()},methods:{createMarker:function(e){this.globalMarkers.push(e)},clearMarkers:function(){var e=this;return u()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new r.a(function(t){for(var n=0;n<e.globalMarkers.length;n+=1)e.globalMarkers[n].setMap(null);e.globalMarkers=[],t()}));case 1:case"end":return t.stop()}},t,e)}))()},savePlace:function(e){var t,n=this,a=e.place?e.place.id:e.id,i=L.a.ref("finds").orderByChild("place/id").equalTo(a),r={uid:this.user.uid,displayName:this.user.displayName,photoURL:this.user.photoURL};i.once("value").then((t=u()(o.a.mark(function t(a){var i,c,l,u;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.val()?(i=a.val(),c=s()(i)[0],L.a.ref("finds/"+c+"/users/"+n.user.uid).set(r),n.addToSaved(c,e,r),l=n.$utils.newMarker(i[c],e.users,n.globalMap,n.infoWindow,n.globalMarkers),n.createMarker(l)):(u=k(e,n.user),L.a.ref("finds").push(u).then(function(t){n.addToSaved(t.key,u,r);var a=n.$utils.newMarker(e,u.users,n.globalMap,n.infoWindow,n.globalMarkers);n.createMarker(a)}));case 1:case"end":return t.stop()}},t,n)})),function(e){return t.apply(this,arguments)}))},addToSaved:function(e,t,n){this.user.saved?this.$set(this.user.saved,e,!0):(this.$set(this.user,"saved",{}),this.$set(this.user.saved,e,!0)),t.users?this.$set(t.users,this.user.uid,n):(this.$set(t,"users",{}),this.$set(t.users,this.user.uid,n)),L.a.ref("users/"+this.user.uid).child("saved/"+e).set(!0)},panToPlace:function(e){var t=new this.google.maps.LatLng(e.place.pos.lat,e.place.pos.lng),n=this.$utils.newMarker(e,e.users,this.globalMap,this.infoWindow,this.globalMarkers);this.createMarker(n),this.globalMap.panTo(t),this.infoWindow.el.open(this.globalMap,n),this.infoWindow.content=e.place},updateMap:function(e){this.globalMap=e},updateMarkers:function(e){this.globalMarkers=e}},computed:{radius:function(){var e=void 0,t=this.globalMap.getBounds(),n=this.globalMap.getCenter();if(t&&n){var a=t.getNorthEast();e=this.google.maps.geometry.spherical.computeDistanceBetween(n,a)}return Math.floor(e)}},components:{LocationSearch:h.a,FindPlaces:v.a,Map:g.a,MyFinds:M.a,HotList:_.a,InfoWindow:y.a,User:w.a}}}).call(t,n("lMsw"))},xJD8:function(e,t,n){"use strict";(function(e){e.KEY=void 0,e.LIBRARIES=["places","geometry"],t.a={name:"App",data:function(){return{google:null}},created:function(){var t=this;e.load(function(e){t.google=e})}}}).call(t,n("lMsw"))},yOnu:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.430d288f3ab966f944b4.js.map